"use strict";(self.webpackChunkthreejs_examples_with_fiber=self.webpackChunkthreejs_examples_with_fiber||[]).push([[612],{6710:function(e,t,o){o.d(t,{Pf:function(){return a},Uv:function(){return r},fx:function(){return n}});var n=window.innerWidth>640?window.innerWidth-300:window.innerWidth,r=window.innerWidth>640?window.innerHeight:window.innerHeight-48,a=n/r},7549:function(e,t,o){o.r(t),o.d(t,{default:function(){return v}});var n=o(2791),r=o(7760),a=o(4647),i=o(2794),c=o(9740),s=o(9502),u=o(6710),d=o.p+"static/media/water.092e79d14e8d98a7b9b9.jpg",l=o(184),m=function(){var e=(0,c.m)(d);e.wrapS=e.wrapT=r.RepeatWrapping,e.repeat.set(5,5);var t=(0,n.useRef)();return(0,n.useEffect)((function(){var e=t.current.geometry.attributes.position;e.usage=r.DynamicDrawUsage;for(var o=0;o<e.count;o++){var n=35*Math.sin(o/2);e.setY(o,n)}}),[]),(0,i.x)((function(e){for(var o=10*e.clock.getElapsedTime(),n=t.current.geometry.attributes.position,r=0;r<n.count;r++){var a=35*Math.sin(r/5+(o+r)/7);n.setY(r,a)}n.needsUpdate=!0})),(0,l.jsxs)("mesh",{"rotation-x":-Math.PI/2,ref:t,children:[(0,l.jsx)("planeGeometry",{args:[2e4,2e4,127,127]}),(0,l.jsx)("meshBasicMaterial",{color:17663,map:e})]})},v=function(){return(0,l.jsxs)(a.Xz,{camera:{position:[0,200,0],fov:60,aspect:u.Pf,near:1,far:2e4},gl:{antialias:!0},dpr:devicePixelRatio,children:[(0,l.jsx)("color",{attach:"background",args:[11193599]}),(0,l.jsx)("fogExp2",{attach:"fog",args:[11193599,7e-4]}),(0,l.jsx)(m,{}),(0,l.jsx)(s.o,{movementSpeed:500,lookSpeed:.1})]})}},9502:function(e,t,o){o.d(t,{o:function(){return p}});var n=o(9439),r=o(4925),a=o(7462),i=o(2791),c=o(2794),s=o(3144),u=o(5671),d=o(7326),l=o(136),m=o(9388),v=o(4942),f=o(7760),Z=new f.Vector3,w=function(e){(0,l.Z)(o,e);var t=(0,m.Z)(o);function o(e,n){var r;return(0,u.Z)(this,o),r=t.call(this),(0,v.Z)((0,d.Z)(r),"object",void 0),(0,v.Z)((0,d.Z)(r),"domElement",void 0),(0,v.Z)((0,d.Z)(r),"enabled",!0),(0,v.Z)((0,d.Z)(r),"movementSpeed",1),(0,v.Z)((0,d.Z)(r),"lookSpeed",.005),(0,v.Z)((0,d.Z)(r),"lookVertical",!0),(0,v.Z)((0,d.Z)(r),"autoForward",!1),(0,v.Z)((0,d.Z)(r),"activeLook",!0),(0,v.Z)((0,d.Z)(r),"heightSpeed",!1),(0,v.Z)((0,d.Z)(r),"heightCoef",1),(0,v.Z)((0,d.Z)(r),"heightMin",0),(0,v.Z)((0,d.Z)(r),"heightMax",1),(0,v.Z)((0,d.Z)(r),"constrainVertical",!1),(0,v.Z)((0,d.Z)(r),"verticalMin",0),(0,v.Z)((0,d.Z)(r),"verticalMax",Math.PI),(0,v.Z)((0,d.Z)(r),"mouseDragOn",!1),(0,v.Z)((0,d.Z)(r),"autoSpeedFactor",0),(0,v.Z)((0,d.Z)(r),"mouseX",0),(0,v.Z)((0,d.Z)(r),"mouseY",0),(0,v.Z)((0,d.Z)(r),"moveForward",!1),(0,v.Z)((0,d.Z)(r),"moveBackward",!1),(0,v.Z)((0,d.Z)(r),"moveLeft",!1),(0,v.Z)((0,d.Z)(r),"moveRight",!1),(0,v.Z)((0,d.Z)(r),"moveUp",!1),(0,v.Z)((0,d.Z)(r),"moveDown",!1),(0,v.Z)((0,d.Z)(r),"viewHalfX",0),(0,v.Z)((0,d.Z)(r),"viewHalfY",0),(0,v.Z)((0,d.Z)(r),"lat",0),(0,v.Z)((0,d.Z)(r),"lon",0),(0,v.Z)((0,d.Z)(r),"lookDirection",new f.Vector3),(0,v.Z)((0,d.Z)(r),"spherical",new f.Spherical),(0,v.Z)((0,d.Z)(r),"target",new f.Vector3),(0,v.Z)((0,d.Z)(r),"connect",(function(e){e.setAttribute("tabindex","-1"),e.style.touchAction="none",e.addEventListener("contextmenu",r.contextmenu),e.addEventListener("mousemove",r.onMouseMove),e.addEventListener("mousedown",r.onMouseDown),e.addEventListener("mouseup",r.onMouseUp),r.domElement=e,window.addEventListener("keydown",r.onKeyDown),window.addEventListener("keyup",r.onKeyUp),r.handleResize()})),(0,v.Z)((0,d.Z)(r),"dispose",(function(){var e,t,o,n;null===(e=r.domElement)||void 0===e||e.removeEventListener("contextmenu",r.contextmenu),null===(t=r.domElement)||void 0===t||t.removeEventListener("mousedown",r.onMouseDown),null===(o=r.domElement)||void 0===o||o.removeEventListener("mousemove",r.onMouseMove),null===(n=r.domElement)||void 0===n||n.removeEventListener("mouseup",r.onMouseUp),window.removeEventListener("keydown",r.onKeyDown),window.removeEventListener("keyup",r.onKeyUp)})),(0,v.Z)((0,d.Z)(r),"handleResize",(function(){r.domElement&&(r.viewHalfX=r.domElement.offsetWidth/2,r.viewHalfY=r.domElement.offsetHeight/2)})),(0,v.Z)((0,d.Z)(r),"onMouseDown",(function(e){var t;if(null===(t=r.domElement)||void 0===t||t.focus(),r.activeLook)switch(e.button){case 0:r.moveForward=!0;break;case 2:r.moveBackward=!0}r.mouseDragOn=!0})),(0,v.Z)((0,d.Z)(r),"onMouseUp",(function(e){if(r.activeLook)switch(e.button){case 0:r.moveForward=!1;break;case 2:r.moveBackward=!1}r.mouseDragOn=!1})),(0,v.Z)((0,d.Z)(r),"onMouseMove",(function(e){r.domElement&&(r.mouseX=e.pageX-r.domElement.offsetLeft-r.viewHalfX,r.mouseY=e.pageY-r.domElement.offsetTop-r.viewHalfY)})),(0,v.Z)((0,d.Z)(r),"onKeyDown",(function(e){switch(e.code){case"ArrowUp":case"KeyW":r.moveForward=!0;break;case"ArrowLeft":case"KeyA":r.moveLeft=!0;break;case"ArrowDown":case"KeyS":r.moveBackward=!0;break;case"ArrowRight":case"KeyD":r.moveRight=!0;break;case"KeyR":r.moveUp=!0;break;case"KeyF":r.moveDown=!0}})),(0,v.Z)((0,d.Z)(r),"onKeyUp",(function(e){switch(e.code){case"ArrowUp":case"KeyW":r.moveForward=!1;break;case"ArrowLeft":case"KeyA":r.moveLeft=!1;break;case"ArrowDown":case"KeyS":r.moveBackward=!1;break;case"ArrowRight":case"KeyD":r.moveRight=!1;break;case"KeyR":r.moveUp=!1;break;case"KeyF":r.moveDown=!1}})),(0,v.Z)((0,d.Z)(r),"lookAt",(function(e,t,o){return e instanceof f.Vector3?r.target.copy(e):t&&o&&r.target.set(e,t,o),r.object.lookAt(r.target),r.setOrientation(),(0,d.Z)(r)})),(0,v.Z)((0,d.Z)(r),"update",(function(e){if(r.enabled){if(r.heightSpeed){var t=f.MathUtils.clamp(r.object.position.y,r.heightMin,r.heightMax)-r.heightMin;r.autoSpeedFactor=e*(t*r.heightCoef)}else r.autoSpeedFactor=0;var o=e*r.movementSpeed;(r.moveForward||r.autoForward&&!r.moveBackward)&&r.object.translateZ(-(o+r.autoSpeedFactor)),r.moveBackward&&r.object.translateZ(o),r.moveLeft&&r.object.translateX(-o),r.moveRight&&r.object.translateX(o),r.moveUp&&r.object.translateY(o),r.moveDown&&r.object.translateY(-o);var n=e*r.lookSpeed;r.activeLook||(n=0);var a=1;r.constrainVertical&&(a=Math.PI/(r.verticalMax-r.verticalMin)),r.lon-=r.mouseX*n,r.lookVertical&&(r.lat-=r.mouseY*n*a),r.lat=Math.max(-85,Math.min(85,r.lat));var i=f.MathUtils.degToRad(90-r.lat),c=f.MathUtils.degToRad(r.lon);r.constrainVertical&&(i=f.MathUtils.mapLinear(i,0,Math.PI,r.verticalMin,r.verticalMax));var s=r.object.position;Z.setFromSphericalCoords(1,i,c).add(s),r.object.lookAt(Z)}})),(0,v.Z)((0,d.Z)(r),"contextmenu",(function(e){return e.preventDefault()})),(0,v.Z)((0,d.Z)(r),"setOrientation",(function(){r.lookDirection.set(0,0,-1).applyQuaternion(r.object.quaternion),r.spherical.setFromVector3(r.lookDirection),r.lat=90-f.MathUtils.radToDeg(r.spherical.phi),r.lon=f.MathUtils.radToDeg(r.spherical.theta)})),r.object=e,r.domElement=n,r.setOrientation(),n&&r.connect(n),r}return(0,s.Z)(o)}(f.EventDispatcher),h=["domElement"],p=i.forwardRef((function(e,t){var o=e.domElement,s=(0,r.Z)(e,h),u=(0,c.w)((function(e){return e.camera})),d=(0,c.w)((function(e){return e.gl})),l=(0,c.w)((function(e){return e.events})),m=o||l.connected||d.domElement,v=i.useState((function(){return new w(u,m)})),f=(0,n.Z)(v,1)[0];return(0,c.x)((function(e,t){f.update(t)}),-1),f?i.createElement("primitive",(0,a.Z)({ref:t,object:f},s)):null}))},9740:function(e,t,o){o.d(t,{m:function(){return s}});var n=o(4942),r=o(7760),a=o(2794),i=o(2791),c=function(e){return e===Object(e)&&!Array.isArray(e)&&"function"!==typeof e};function s(e){var t=(0,a.w)((function(e){return e.gl})),o=(0,a.z)(r.TextureLoader,c(e)?Object.values(e):e);if((0,i.useEffect)((function(){(Array.isArray(o)?o:[o]).forEach(t.initTexture)}),[t,o]),c(e)){var s=Object.keys(e),u={};return s.forEach((function(e){return Object.assign(u,(0,n.Z)({},e,o[s.indexOf(e)]))})),u}return o}s.preload=function(e){return a.z.preload(r.TextureLoader,e)},s.clear=function(e){return a.z.clear(r.TextureLoader,e)}}}]);
//# sourceMappingURL=612.e0fc6990.chunk.js.map