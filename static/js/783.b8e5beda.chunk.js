"use strict";(self.webpackChunkthreejs_examples_with_fiber=self.webpackChunkthreejs_examples_with_fiber||[]).push([[783],{6710:function(e,t,n){n.d(t,{Pf:function(){return s},Uv:function(){return r},fx:function(){return i}});var i=window.innerWidth>640?window.innerWidth-300:window.innerWidth,r=window.innerWidth>640?window.innerHeight:window.innerHeight-48,s=i/r},783:function(e,t,n){n.r(t),n.d(t,{default:function(){return T}});var i=n(2791),r=n(7760),s=n(3144),a=n(5671),o=n(136),u=n(9388),l=new r.Vector3,h=new r.Line3,c=new r.Plane,v=new r.Vector3,f=new r.Triangle,d=function(){function e(){(0,a.Z)(this,e),this.tolerance=-1,this.faces=[],this.newFaces=[],this.assigned=new g,this.unassigned=new g,this.vertices=[]}return(0,s.Z)(e,[{key:"setFromPoints",value:function(e){if(e.length>=4){this.makeEmpty();for(var t=0,n=e.length;t<n;t++)this.vertices.push(new m(e[t]));this.compute()}return this}},{key:"setFromObject",value:function(e){var t=[];return e.updateMatrixWorld(!0),e.traverse((function(e){var n=e.geometry;if(void 0!==n){if(n.isGeometry)return void console.error("THREE.ConvexHull no longer supports Geometry. Use THREE.BufferGeometry instead.");if(n.isBufferGeometry){var i=n.attributes.position;if(void 0!==i)for(var s=0,a=i.count;s<a;s++){var o=new r.Vector3;o.fromBufferAttribute(i,s).applyMatrix4(e.matrixWorld),t.push(o)}}}})),this.setFromPoints(t)}},{key:"containsPoint",value:function(e){for(var t=this.faces,n=0,i=t.length;n<i;n++){if(t[n].distanceToPoint(e)>this.tolerance)return!1}return!0}},{key:"intersectRay",value:function(e,t){for(var n=this.faces,i=-1/0,r=1/0,s=0,a=n.length;s<a;s++){var o=n[s],u=o.distanceToPoint(e.origin),l=o.normal.dot(e.direction);if(u>0&&l>=0)return null;var h=0!==l?-u/l:0;if(!(h<=0)&&(l>0?r=Math.min(h,r):i=Math.max(h,i),i>r))return null}return i!==-1/0?e.at(i,t):e.at(r,t),t}},{key:"intersectsRay",value:function(e){return null!==this.intersectRay(e,l)}},{key:"makeEmpty",value:function(){return this.faces=[],this.vertices=[],this}},{key:"addVertexToFace",value:function(e,t){return e.face=t,null===t.outside?this.assigned.append(e):this.assigned.insertBefore(t.outside,e),t.outside=e,this}},{key:"removeVertexFromFace",value:function(e,t){return e===t.outside&&(null!==e.next&&e.next.face===t?t.outside=e.next:t.outside=null),this.assigned.remove(e),this}},{key:"removeAllVerticesFromFace",value:function(e){if(null!==e.outside){for(var t=e.outside,n=e.outside;null!==n.next&&n.next.face===e;)n=n.next;return this.assigned.removeSubList(t,n),t.prev=n.next=null,e.outside=null,t}}},{key:"deleteFaceVertices",value:function(e,t){var n=this.removeAllVerticesFromFace(e);if(void 0!==n)if(void 0===t)this.unassigned.appendChain(n);else{var i=n;do{var r=i.next;t.distanceToPoint(i.point)>this.tolerance?this.addVertexToFace(i,t):this.unassigned.append(i),i=r}while(null!==i)}return this}},{key:"resolveUnassignedPoints",value:function(e){if(!1===this.unassigned.isEmpty()){var t=this.unassigned.first();do{for(var n=t.next,i=this.tolerance,r=null,s=0;s<e.length;s++){var a=e[s];if(0===a.mark){var o=a.distanceToPoint(t.point);if(o>i&&(i=o,r=a),i>1e3*this.tolerance)break}}null!==r&&this.addVertexToFace(t,r),t=n}while(null!==t)}return this}},{key:"computeExtremes",value:function(){for(var e=new r.Vector3,t=new r.Vector3,n=[],i=[],s=0;s<3;s++)n[s]=i[s]=this.vertices[0];e.copy(this.vertices[0].point),t.copy(this.vertices[0].point);for(var a=0,o=this.vertices.length;a<o;a++){for(var u=this.vertices[a],l=u.point,h=0;h<3;h++)l.getComponent(h)<e.getComponent(h)&&(e.setComponent(h,l.getComponent(h)),n[h]=u);for(var c=0;c<3;c++)l.getComponent(c)>t.getComponent(c)&&(t.setComponent(c,l.getComponent(c)),i[c]=u)}return this.tolerance=3*Number.EPSILON*(Math.max(Math.abs(e.x),Math.abs(t.x))+Math.max(Math.abs(e.y),Math.abs(t.y))+Math.max(Math.abs(e.z),Math.abs(t.z))),{min:n,max:i}}},{key:"computeInitialHull",value:function(){for(var e=this.vertices,t=this.computeExtremes(),n=t.min,i=t.max,r=0,s=0,a=0;a<3;a++){var o=i[a].point.getComponent(a)-n[a].point.getComponent(a);o>r&&(r=o,s=a)}var u,l,f=n[s],d=i[s];r=0,h.set(f.point,d.point);for(var A=0,m=this.vertices.length;A<m;A++){var g=e[A];if(g!==f&&g!==d){h.closestPointToPoint(g.point,!0,v);var x=v.distanceToSquared(g.point);x>r&&(r=x,u=g)}}r=-1,c.setFromCoplanarPoints(f.point,d.point,u.point);for(var w=0,y=this.vertices.length;w<y;w++){var k=e[w];if(k!==f&&k!==d&&k!==u){var F=Math.abs(c.distanceToPoint(k.point));F>r&&(r=F,l=k)}}var E=[];if(c.distanceToPoint(l.point)<0){E.push(p.create(f,d,u),p.create(l,d,f),p.create(l,u,d),p.create(l,f,u));for(var V=0;V<3;V++){var C=(V+1)%3;E[V+1].getEdge(2).setTwin(E[0].getEdge(C)),E[V+1].getEdge(1).setTwin(E[C+1].getEdge(0))}}else{E.push(p.create(f,u,d),p.create(l,f,d),p.create(l,d,u),p.create(l,u,f));for(var P=0;P<3;P++){var T=(P+1)%3;E[P+1].getEdge(2).setTwin(E[0].getEdge((3-P)%3)),E[P+1].getEdge(0).setTwin(E[T+1].getEdge(1))}}for(var b=0;b<4;b++)this.faces.push(E[b]);for(var N=0,B=e.length;N<B;N++){var M=e[N];if(M!==f&&M!==d&&M!==u&&M!==l){r=this.tolerance;for(var j=null,Z=0;Z<4;Z++){var W=this.faces[Z].distanceToPoint(M.point);W>r&&(r=W,j=this.faces[Z])}null!==j&&this.addVertexToFace(M,j)}}return this}},{key:"reindexFaces",value:function(){for(var e=[],t=0;t<this.faces.length;t++){var n=this.faces[t];0===n.mark&&e.push(n)}return this.faces=e,this}},{key:"nextVertexToAdd",value:function(){if(!1===this.assigned.isEmpty()){var e,t=0,n=this.assigned.first().face,i=n.outside;do{var r=n.distanceToPoint(i.point);r>t&&(t=r,e=i),i=i.next}while(null!==i&&i.face===n);return e}}},{key:"computeHorizon",value:function(e,t,n,i){var r;this.deleteFaceVertices(n),n.mark=1,r=null===t?t=n.getEdge(0):t.next;do{var s=r.twin,a=s.face;0===a.mark&&(a.distanceToPoint(e)>this.tolerance?this.computeHorizon(e,s,a,i):i.push(r)),r=r.next}while(r!==t);return this}},{key:"addAdjoiningFace",value:function(e,t){var n=p.create(e,t.tail(),t.head());return this.faces.push(n),n.getEdge(-1).setTwin(t.twin),n.getEdge(0)}},{key:"addNewFaces",value:function(e,t){this.newFaces=[];for(var n=null,i=null,r=0;r<t.length;r++){var s=t[r],a=this.addAdjoiningFace(e,s);null===n?n=a:a.next.setTwin(i),this.newFaces.push(a.face),i=a}return n.next.setTwin(i),this}},{key:"addVertexToHull",value:function(e){var t=[];return this.unassigned.clear(),this.removeVertexFromFace(e,e.face),this.computeHorizon(e.point,null,e.face,t),this.addNewFaces(e,t),this.resolveUnassignedPoints(this.newFaces),this}},{key:"cleanup",value:function(){return this.assigned.clear(),this.unassigned.clear(),this.newFaces=[],this}},{key:"compute",value:function(){var e;for(this.computeInitialHull();void 0!==(e=this.nextVertexToAdd());)this.addVertexToHull(e);return this.reindexFaces(),this.cleanup(),this}}]),e}(),p=function(){function e(){(0,a.Z)(this,e),this.normal=new r.Vector3,this.midpoint=new r.Vector3,this.area=0,this.constant=0,this.outside=null,this.mark=0,this.edge=null}return(0,s.Z)(e,[{key:"getEdge",value:function(e){for(var t=this.edge;e>0;)t=t.next,e--;for(;e<0;)t=t.prev,e++;return t}},{key:"compute",value:function(){var e=this.edge.tail(),t=this.edge.head(),n=this.edge.next.head();return f.set(e.point,t.point,n.point),f.getNormal(this.normal),f.getMidpoint(this.midpoint),this.area=f.getArea(),this.constant=this.normal.dot(this.midpoint),this}},{key:"distanceToPoint",value:function(e){return this.normal.dot(e)-this.constant}}],[{key:"create",value:function(t,n,i){var r=new e,s=new A(t,r),a=new A(n,r),o=new A(i,r);return s.next=o.prev=a,a.next=s.prev=o,o.next=a.prev=s,r.edge=s,r.compute()}}]),e}(),A=function(){function e(t,n){(0,a.Z)(this,e),this.vertex=t,this.prev=null,this.next=null,this.twin=null,this.face=n}return(0,s.Z)(e,[{key:"head",value:function(){return this.vertex}},{key:"tail",value:function(){return this.prev?this.prev.vertex:null}},{key:"length",value:function(){var e=this.head(),t=this.tail();return null!==t?t.point.distanceTo(e.point):-1}},{key:"lengthSquared",value:function(){var e=this.head(),t=this.tail();return null!==t?t.point.distanceToSquared(e.point):-1}},{key:"setTwin",value:function(e){return this.twin=e,e.twin=this,this}}]),e}(),m=(0,s.Z)((function e(t){(0,a.Z)(this,e),this.point=t,this.prev=null,this.next=null,this.face=null})),g=function(){function e(){(0,a.Z)(this,e),this.head=null,this.tail=null}return(0,s.Z)(e,[{key:"first",value:function(){return this.head}},{key:"last",value:function(){return this.tail}},{key:"clear",value:function(){return this.head=this.tail=null,this}},{key:"insertBefore",value:function(e,t){return t.prev=e.prev,t.next=e,null===t.prev?this.head=t:t.prev.next=t,e.prev=t,this}},{key:"insertAfter",value:function(e,t){return t.prev=e,t.next=e.next,null===t.next?this.tail=t:t.next.prev=t,e.next=t,this}},{key:"append",value:function(e){return null===this.head?this.head=e:this.tail.next=e,e.prev=this.tail,e.next=null,this.tail=e,this}},{key:"appendChain",value:function(e){for(null===this.head?this.head=e:this.tail.next=e,e.prev=this.tail;null!==e.next;)e=e.next;return this.tail=e,this}},{key:"remove",value:function(e){return null===e.prev?this.head=e.next:e.prev.next=e.next,null===e.next?this.tail=e.prev:e.next.prev=e.prev,this}},{key:"removeSubList",value:function(e,t){return null===e.prev?this.head=t.next:e.prev.next=t.next,null===t.next?this.tail=e.prev:t.next.prev=e.prev,this}},{key:"isEmpty",value:function(){return null===this.head}}]),e}(),x=function(e){(0,o.Z)(n,e);var t=(0,u.Z)(n);function n(){var e,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];(0,a.Z)(this,n),e=t.call(this);var s=[],o=[];void 0===d&&console.error("THREE.ConvexBufferGeometry: ConvexBufferGeometry relies on ConvexHull");for(var u=(new d).setFromPoints(i),l=u.faces,h=0;h<l.length;h++){var c=l[h],v=c.edge;do{var f=v.head().point;s.push(f.x,f.y,f.z),o.push(c.normal.x,c.normal.y,c.normal.z),v=v.next}while(v!==c.edge)}return e.setAttribute("position",new r.Float32BufferAttribute(s,3)),e.setAttribute("normal",new r.Float32BufferAttribute(o,3)),e}return(0,s.Z)(n)}(r.BufferGeometry),w=n(7133),y=n(4647),k=n(2794),F=n(9740),E=n(3520),V=n(6710),C=n(184),P=function(){var e=(0,F.m)("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAAXNSR0IArs4c6QAAAAZiS0dEAAAAAAAA+UO7fwAAAAlwSFlzAAALEwAACxMBAJqcGAAAAAd0SU1FB9sHDgwCEMBJZu0AAAAdaVRYdENvbW1lbnQAAAAAAENyZWF0ZWQgd2l0aCBHSU1QZC5lBwAABM5JREFUWMO1V0tPG2cUPZ4Hxh6DazIOrjFNqJs0FIMqWFgWQkatsmvVbtggKlSVRVf5AWz4AWz4AUSKEChll19QJYSXkECuhFxsHjEhxCYm+DWGMZ5HF72DJq4bAzFXurI0M/I5997v3u9cC65vTJVn2lX/xHINQOYSBLTLEuIuCWw4Z3IGAEvf6ASmVHjNzHCXBG4A0AjACsAOwEbO0nsFQBnAGYASAIl+ZRMR7SolMEdsByD09fV5R0ZGgg8ePPjW5/N1iqLYpuu6RZblciKR2I9Go69evnwZnZ+fjwI4IS8AKBIRzeQfJWCANwKwh0KhtrGxsYehUOin1tbW+zzP23ietzY2NnIAoGmaLsuyUiqVyvl8XtrY2NiamZn589mzZxsAUgCOAeQAnFI2tI+VxIjaAeDzoaGh7xYWFuZOTk6OZVk+12uYqqq6JEnn0Wg0OT4+/geAXwGEAdwDIFJQXC1wO4DWR48e/RCPxxclSSroVzRFUbSDg4P848ePFwH8DuAhkWih83TRQWxFOXgAwvDwcOfo6OhvXV1d39tsNtuVBwTDWBwOh1UUxVsMw1hXVlbSdCgNV43uYSvrHg6H24aHh38eHBz85TrgF9FYLHA4HLzH43FvbW2d7u/vG+dANp8FpqIlbd3d3V8Fg8EfBUFw4BONZVmL3+9vHhkZCQL4AoAHgJPK8G+yzC0XDofdoVAo5PP5vkadTBAEtr+/39ff3x8gAp/RPOEqx2qjx+NpvXv3bk9DQ0NDvQgwDIOWlhZrMBj8kgi0UJdxRgYMArzL5XJ7vd57qLPZ7Xamp6fnNgBXtQxcjFuHw+Hyer3t9SYgCAITCAScAJoBNNEY/08GOFVVrfVMv7kMNDntFD1vjIAPrlRN0xjckOm6biFQ3jwNPwDMZrOnqVTqfb3Bi8Wivru7W/VCYkwPlKOjo0IikXh7EwQikYgE4Nw0CfXKDCipVCoTj8df3QABbW1tLUc6oUgkFPMkVACUNjc337148eKvw8PDbJ2jP1taWkoCyNDVXDSECmNSK4qiKNLq6urW8+fPI/UicHx8rD59+jSVy+WOAKSJhKENwFItLtoxk8mwsixzHR0dHe3t7c5PAU+n09rs7OzJkydPYqVSaQfANoDXALIk31S2smU1TWMPDg7K5XKZ7+3t9TudTut1U7+wsFCcmJiIpdPpbQBxADsAknQWymYCOukBHYCuKApisdhpMpnURFEU79y503TVyKenpzOTk5M7e3t7MQKPV0Zv1gNm+awB0MvlshqLxfLb29uyJElWURSbXC4XXyvqxcXFs6mpqeTc3Nzu3t7e3wQcA7BPZ8Cov1pNlJplmQtAG8MwHV6v95tAINA5MDBwPxAIuLu6upr8fr/VAN3c3JQjkcjZ+vp6fnl5+d2bN29SuVzuNYAEpf01CdRChUL+X1VskHACuA3Ay3Fcu9vt7nA6nZ7m5uYWQRCaNE3jVVW15PP580KhIGUymWw2m00DOAJwSP4WwPtq4LX2Ao6USxNlQyS/RcQcdLGwlNIz6vEMAaZpNzCk2Pll94LK/cDYimxERiBwG10sxjgvEZBE0UpE6vxj+0Ct5bTaXthgEhRmja8QWNkkPGsuIpfdjpkK+cZUWTC0KredVmtD/gdlSl6EG4AMvQAAAABJRU5ErkJggg=="),t=(0,i.useRef)(),n=(0,i.useMemo)((function(){var e=new r.DodecahedronGeometry(10);e.deleteAttribute("normal"),e.deleteAttribute("uv");for(var t=[],n=(e=w.$1(e)).getAttribute("position"),i=0;i<n.count;i++){var s=new r.Vector3;s.fromBufferAttribute(n,i),t.push(s)}return{pointsGeometry:(new r.BufferGeometry).setFromPoints(t),meshGeometry:new x(t)}}),[]),s=n.pointsGeometry,a=n.meshGeometry;return(0,k.x)((function(){t.current.rotation.y+=.005})),(0,C.jsxs)("group",{ref:t,children:[(0,C.jsx)("points",{geometry:s,children:(0,C.jsx)("pointsMaterial",{color:"#0080ff",map:e,size:1,alphaTest:.5})}),(0,C.jsx)("mesh",{geometry:a,renderOrder:0,children:(0,C.jsx)("meshLambertMaterial",{color:"#ffffff",opacity:.5,transparent:!0,side:r.BackSide})}),(0,C.jsx)("mesh",{geometry:a,renderOrder:1,children:(0,C.jsx)("meshLambertMaterial",{color:"#ffffff",opacity:.5,transparent:!0,side:r.FrontSide})})]})},T=function(){return(0,C.jsxs)(y.Xz,{camera:{position:[15,20,30],fov:40,aspect:V.Pf,near:1,far:1e3},gl:{antialias:!0},dpr:devicePixelRatio,children:[(0,C.jsx)("color",{attach:"background",args:[0]}),(0,C.jsx)("ambientLight",{args:[2236962]}),(0,C.jsx)("pointLight",{args:[16777215,1]}),(0,C.jsx)("axesHelper",{args:[20]}),(0,C.jsx)(P,{}),(0,C.jsx)(E.z,{minDistance:20,maxDistance:50,maxPolarAngle:Math.PI/2})]})}}}]);
//# sourceMappingURL=783.b8e5beda.chunk.js.map