"use strict";(self.webpackChunkthreejs_examples_with_fiber=self.webpackChunkthreejs_examples_with_fiber||[]).push([[896],{6458:function(e,t,n){n.r(t),n.d(t,{default:function(){return y}});var i,a,o,r=n(3433),s=n(2791),c=n(7760),l=n(4647),h=n(2794),f=n(3655),u=n(3520),d=n(9513),p=n.p+"static/media/Xbot.8c92d76040d6361cd7e4.glb",g=n(184);f.L.preload(p);var m,v=[],w="idle",j=[],x={idle:{weight:1},walk:{weight:0},run:{weight:0}},b={sneak_pose:{weight:0},sad_pose:{weight:0},agree:{weight:0},headShake:{weight:0}},k=function(e,t){e.enabled=!0,e.setEffectiveTimeScale(1),e.setEffectiveWeight(t)},A=function(e){var t=e.getClip(),n=x[t.name]||b[t.name];k(e,n.weight),e.play()},C=function(e){o.timeScale=e},_=function(e,t,n){o.addEventListener("loop",(function i(a){a.action===e&&(o.removeEventListener("loop",i),S(e,t,n))}))},S=function(e,t,n){t?(k(t,1),t.time=0,e?e.crossFadeTo(t,n,!0):t.fadeIn(n)):e.fadeOut(n)},E=function(){var e=(0,f.L)(p),t=e.scene,n=e.animations;i=t,o=new c.AnimationMixer(i),m=n.length;for(var r=0;r!==m;++r){var l=n[r],u=l.name;if(x[u]){var d=o.clipAction(l);A(d),x[u].action=d,j.push(d)}else if(b[u]){c.AnimationUtils.makeClipAdditive(l),l.name.endsWith("_pose")&&(l=c.AnimationUtils.subclip(l,l.name,2,3,30));var v=o.clipAction(l);A(v),b[u].action=v,j.push(v)}}return(a=new c.SkeletonHelper(t)).visible=!1,(0,h.x)((function(e,t){for(var n=0;n!==m;++n){var i=j[n],a=i.getClip();(x[a.name]||b[a.name]).weight=i.getEffectiveWeight()}var r=t;o.update(r)})),(0,s.useEffect)((function(){t.traverse((function(e){return e.isMesh&&(e.castShadow=!0)}))}),[t]),(0,g.jsxs)(g.Fragment,{children:[(0,g.jsx)("primitive",{object:t}),(0,g.jsx)("primitive",{object:a})]})},L=function(){for(var e=["None"].concat((0,r.Z)(Object.keys(x))),t={},n=function(n,i){var a=e[n],o=x[a];t[a]=(0,d.LI)((function(){var e=x[w];!function(e,t,n){if("idle"!==w&&e&&t?_(e,t,n):S(e,t,n),t){var i=t.getClip();w=i.name}else w="None";v.forEach((function(e){e.property===w?e.setActive():e.setInactive()}))}(e?e.action:null,o?o.action:null,.35)}))},i=0,a=e.length;i!==a;++i)n(i);(0,d.M4)("Base Actions",t);for(var o={},s=function(){var e=l[c],t=b[e];o[e]={value:t.weight,min:0,max:1,step:.01,onChange:function(e){k(t.action,e),t.weight=e}}},c=0,l=Object.keys(b);c<l.length;c++)s();return(0,d.M4)("Additive Action Weights",o),(0,d.M4)("General Speed",{"modify time scale":{value:1,min:0,max:1.5,step:.01,onChange:C}}),null},M=function(){return(0,g.jsxs)("mesh",{rotation:[-Math.PI/2,0,0],receiveShadow:!0,children:[(0,g.jsx)("planeGeometry",{args:[100,100]}),(0,g.jsx)("meshPhongMaterial",{color:10066329,depthWrite:!1})]})},y=function(){return(0,g.jsxs)(l.Xz,{camera:{position:[-1,2,3],fov:45,near:1,far:100},dpr:[1,2],shadows:!0,children:[(0,g.jsx)("color",{attach:"background",args:[10526880]}),(0,g.jsx)("fog",{attach:"fog",color:10526880,near:10,far:50}),(0,g.jsx)("hemisphereLight",{color:16777215,groundColor:4473924,position:[0,20,0]}),(0,g.jsx)("directionalLight",{color:16777215,position:[3,10,10],castShadow:!0,children:(0,g.jsx)("orthographicCamera",{attach:"shadow-camera",args:[-2,2,2,-2,.1,40]})}),(0,g.jsx)(M,{}),(0,g.jsx)(E,{}),(0,g.jsx)(L,{}),(0,g.jsx)(u.z,{enablePan:!1,enableZoom:!1,target:[0,1,0]})]})}}}]);
//# sourceMappingURL=896.8ff0b046.chunk.js.map