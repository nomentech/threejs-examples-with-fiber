"use strict";(self.webpackChunkthreejs_examples_with_fiber=self.webpackChunkthreejs_examples_with_fiber||[]).push([[746],{6746:function(e,i,o){o.r(i);var t,n,a,d,s,r,l,c,f,u,h=o(2791),m=o(323),p=o(7219),w=o(4647),g=o(3655),v=o(7786),b=o(184),k=[],y=!1,j=0;g.L.preload("/models/Soldier.glb");var x=function(e,i){e.enabled=!0,e.setEffectiveTimeScale(1),e.setEffectiveWeight(i)},E=function(){x(l,P["modify idle weight"]),x(c,P["modify walk weight"]),x(f,P["modify run weight"]),u.forEach((function(e){e.play()}))},C=function(){u.forEach((function(e){e.paused=!0}))},S=function(){u.forEach((function(e){e.paused=!1}))},F=function(e){t.visible=e},A=function(e){n.visible=e},L=function(e){a.timeScale=e},W=function(e,i,o){var t=_(o);y=!1,S(),e===l?M(e,i,t):z(e,i,t)},_=function(e){return P["use default duration"]?e:P["set custom duration"]},z=function(e,i,o){a.addEventListener("loop",(function t(n){n.action===e&&(a.removeEventListener("loop",t),M(e,i,o))}))},M=function(e,i,o){x(i,1),i.time=0,e.crossFadeTo(i,o,!0)},P={"show model":!0,"show skeleton":!0,"deactivate all":function(){u.forEach((function(e){e.stop()}))},"activate all":E,"pause/continue":function(){y?(y=!1,S()):l.paused?S():C()},"make single step":function(){S(),y=!0,j=P["modify step size"]},"modify step size":.05,"from walk to idle":function(){W(c,l,1)},"from idle to walk":function(){W(l,c,.5)},"from walk to run":function(){W(c,f,2.5)},"from run to walk":function(){W(f,c,5)},"use default duration":!0,"set custom duration":3.5,"modify idle weight":0,"modify walk weight":1,"modify run weight":0,"modify time scale":1},G=function(){var e=(0,g.L)("/models/Soldier.glb"),i=e.scene,o=e.animations;return t=i,a=new m.AnimationMixer(t),l=a.clipAction(o[0]),c=a.clipAction(o[3]),f=a.clipAction(o[1]),u=[l,c,f],(n=new m.SkeletonHelper(i)).visible=!0,(0,p.x)((function(e,i){d=l.getEffectiveWeight(),s=c.getEffectiveWeight(),r=f.getEffectiveWeight(),P["modify idle weight"]=d,P["modify walk weight"]=s,P["modify run weight"]=r,1===d&&0===s&&0===r&&(k[0].disable(),k[1].enable(),k[2].disable(),k[3].disable()),0===d&&1===s&&0===r&&(k[0].enable(),k[1].disable(),k[2].enable(),k[3].disable()),0===d&&0===s&&1===r&&(k[0].disable(),k[1].disable(),k[2].disable(),k[3].enable());var o=i;y&&(o=j,j=0),a.update(o)})),(0,h.useEffect)((function(){i.traverse((function(e){return e.isMesh&&(e.castShadow=!0)})),E()}),[i]),(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)("primitive",{object:i}),(0,b.jsx)("primitive",{object:n}),(0,b.jsx)(X,{})]})},T=function(){return(0,b.jsxs)("mesh",{rotation:[-Math.PI/2,0,0],receiveShadow:!0,children:[(0,b.jsx)("planeGeometry",{args:[100,100]}),(0,b.jsx)("meshPhongMaterial",{color:10066329,depthWrite:!1})]})},X=function(){var e=new v.XS({width:310});return(0,h.useEffect)((function(){var i=e.addFolder("Visibility"),o=e.addFolder("Activation/Deactivation"),t=e.addFolder("Pausing/Stepping"),n=e.addFolder("Crossfading"),a=e.addFolder("Blend Weights"),d=e.addFolder("General Speed");i.add(P,"show model").onChange(F),i.add(P,"show skeleton").onChange(A),o.add(P,"deactivate all"),o.add(P,"activate all"),t.add(P,"pause/continue"),t.add(P,"make single step"),t.add(P,"modify step size",.01,.1,.001),k.push(n.add(P,"from walk to idle")),k.push(n.add(P,"from idle to walk")),k.push(n.add(P,"from walk to run")),k.push(n.add(P,"from run to walk")),n.add(P,"use default duration"),n.add(P,"set custom duration",0,10,.01),a.add(P,"modify idle weight",0,1,.01).listen().onChange((function(e){x(l,e)})),a.add(P,"modify walk weight",0,1,.01).listen().onChange((function(e){x(c,e)})),a.add(P,"modify run weight",0,1,.01).listen().onChange((function(e){x(f,e)})),d.add(P,"modify time scale",0,1.5,.01).onChange(L),i.open(),o.open(),t.open(),n.open(),a.open(),d.open()}),[]),null};i.default=function(){return(0,b.jsxs)(w.Xz,{camera:{position:[1,2,-3],fov:45,near:1,far:1e3},dpr:[1,2],shadows:!0,onCreated:function(e){e.camera.lookAt(0,1,0)},children:[(0,b.jsx)("color",{attach:"background",args:[10526880]}),(0,b.jsx)("fog",{attach:"fog",color:10526880,near:10,far:50}),(0,b.jsx)("hemisphereLight",{color:16777215,groundColor:4473924,position:[0,20,0]}),(0,b.jsx)("directionalLight",{color:16777215,position:[-3,10,-10],castShadow:!0,"shadow-camera-left":-2,"shadow-camera-right":2,"shadow-camera-top":2,"shadow-camera-bottom":-2,"shadow-camera-near":.1,"shadow-camera-far":40}),(0,b.jsx)(T,{}),(0,b.jsx)(G,{})]})}}}]);
//# sourceMappingURL=746.d5f4ffd4.chunk.js.map