"use strict";(self.webpackChunkthreejs_examples_with_fiber=self.webpackChunkthreejs_examples_with_fiber||[]).push([[839],{6710:function(e,t,n){n.d(t,{Pf:function(){return r},Uv:function(){return i},fx:function(){return o}});var o=window.innerWidth>640?window.innerWidth-300:window.innerWidth,i=window.innerWidth>640?window.innerHeight:window.innerHeight-48,r=o/i},3978:function(e,t,n){n.r(t),n.d(t,{default:function(){return P}});var o=n(3433),i=n(9439),r=n(2791),a=n(323),s=n(7786),c=n(3144),u=n(5671),p=n(136),l=n(9388),f=function(e){(0,p.Z)(n,e);var t=(0,l.Z)(n);function n(e,o,i,r){var s;(0,u.Z)(this,n),s=t.call(this);var c=[],p=[],l=[],f=new a.Vector3,h=new a.Matrix4;h.makeRotationFromEuler(i),h.setPosition(o);var m=new a.Matrix4;function w(t,n,o){n.applyMatrix4(e.matrixWorld),n.applyMatrix4(m),o.transformDirection(e.matrixWorld),t.push(new d(n.clone(),o.clone()))}function x(e,t){for(var n=[],o=.5*Math.abs(r.dot(t)),i=0;i<e.length;i+=3){var a=void 0,s=void 0,c=void 0,u=void 0,p=e[i+0].position.dot(t)-o>0,l=e[i+1].position.dot(t)-o>0,f=e[i+2].position.dot(t)-o>0;switch((p?1:0)+(l?1:0)+(f?1:0)){case 0:n.push(e[i]),n.push(e[i+1]),n.push(e[i+2]);break;case 1:if(p&&(a=e[i+1],s=e[i+2],c=v(e[i],a,t,o),u=v(e[i],s,t,o)),l){a=e[i],s=e[i+2],c=v(e[i+1],a,t,o),u=v(e[i+1],s,t,o),n.push(c),n.push(s.clone()),n.push(a.clone()),n.push(s.clone()),n.push(c.clone()),n.push(u);break}f&&(a=e[i],s=e[i+1],c=v(e[i+2],a,t,o),u=v(e[i+2],s,t,o)),n.push(a.clone()),n.push(s.clone()),n.push(c),n.push(u),n.push(c.clone()),n.push(s.clone());break;case 2:p||(s=v(a=e[i].clone(),e[i+1],t,o),c=v(a,e[i+2],t,o),n.push(a),n.push(s),n.push(c)),l||(s=v(a=e[i+1].clone(),e[i+2],t,o),c=v(a,e[i],t,o),n.push(a),n.push(s),n.push(c)),f||(s=v(a=e[i+2].clone(),e[i],t,o),c=v(a,e[i+1],t,o),n.push(a),n.push(s),n.push(c))}}return n}function v(e,t,n,o){var i=e.position.dot(n)-o,r=i/(i-(t.position.dot(n)-o));return new d(new a.Vector3(e.position.x+r*(t.position.x-e.position.x),e.position.y+r*(t.position.y-e.position.y),e.position.z+r*(t.position.z-e.position.z)),new a.Vector3(e.normal.x+r*(t.normal.x-e.normal.x),e.normal.y+r*(t.normal.y-e.normal.y),e.normal.z+r*(t.normal.z-e.normal.z)))}return m.copy(h).invert(),function(){var t=[],n=new a.Vector3,o=new a.Vector3;if(!0===e.geometry.isGeometry)return void console.error("THREE.DecalGeometry no longer supports THREE.Geometry. Use BufferGeometry instead.");var i=e.geometry,s=i.attributes.position,u=i.attributes.normal;if(null!==i.index)for(var d=i.index,m=0;m<d.count;m++)n.fromBufferAttribute(s,d.getX(m)),o.fromBufferAttribute(u,d.getX(m)),w(t,n,o);else for(var v=0;v<s.count;v++)n.fromBufferAttribute(s,v),o.fromBufferAttribute(u,v),w(t,n,o);t=x(t,f.set(1,0,0)),t=x(t,f.set(-1,0,0)),t=x(t,f.set(0,1,0)),t=x(t,f.set(0,-1,0)),t=x(t,f.set(0,0,1)),t=x(t,f.set(0,0,-1));for(var b=0;b<t.length;b++){var g=t[b];l.push(.5+g.position.x/r.x,.5+g.position.y/r.y),g.position.applyMatrix4(h),c.push(g.position.x,g.position.y,g.position.z),p.push(g.normal.x,g.normal.y,g.normal.z)}}(),s.setAttribute("position",new a.Float32BufferAttribute(c,3)),s.setAttribute("normal",new a.Float32BufferAttribute(p,3)),s.setAttribute("uv",new a.Float32BufferAttribute(l,2)),s}return(0,c.Z)(n)}(a.BufferGeometry),d=function(){function e(t,n){(0,u.Z)(this,e),this.position=t,this.normal=n}return(0,c.Z)(e,[{key:"clone",value:function(){return new this.constructor(this.position.clone(),this.normal.clone())}}]),e}(),h=n(4647),m=n(3655),w=n(3520),x=n(6710),v=n.p+"static/media/LeePerrySmith.26dcc44b737902aec4e6.glb",b=n.p+"static/media/Map-COL.0b86c3b0412d0da1c080.jpg",g=n.p+"static/media/Map-SPEC.0f292bb5efa3bc89713d.jpg",y=n.p+"static/media/Infinite-Level_02_Tangent_SmoothUV.c9596c263d76437bafa4.jpg",j=n.p+"static/media/decal-diffuse.0daff3a813d1614480a9.png",M=n.p+"static/media/decal-normal.508ad691f0b238fa2726.jpg",S=n(184);m.L.preload(v);var k,z=new a.TextureLoader,A=z.load(b),B=z.load(g),L=z.load(y),_={minScale:10,maxScale:20,rotate:!0,clear:function(){}},V=z.load(j),Z=z.load(M),E=new a.MeshPhongMaterial({specular:4473924,map:V,normalMap:Z,normalScale:new a.Vector2(1,1),shininess:30,transparent:!0,depthTest:!0,depthWrite:!1,polygonOffset:!0,polygonOffsetFactor:-4,wireframe:!1}),P=function(){var e=(0,m.L)(v);k=e.scene.children[0];var t=(0,r.useState)([]),n=(0,i.Z)(t,2),c=n[0],u=n[1];return(0,S.jsxs)(h.Xz,{camera:{position:[0,0,120],fov:45,aspect:x.Pf,near:1,far:1e3},onCreated:function(e){e.scene;!function(){var e=new s.XS;e.add(_,"minScale",1,30),e.add(_,"maxScale",1,30),e.add(_,"rotate"),e.add(_,"clear"),e.open()}()},children:[(0,S.jsx)("color",{attach:"background",args:["black"]}),(0,S.jsx)("ambientLight",{args:[4469555]}),(0,S.jsx)("directionalLight",{args:[16768460,1],position:[1,.75,.5]}),(0,S.jsx)("directionalLight",{args:[13421823,1],position:[-1,.75,-.5]}),(0,S.jsx)("primitive",{object:k,scale:10,onClick:function(e){var t=e.point,n=new a.Vector3(10,10,10),i=_.minScale+Math.random()*(_.maxScale-_.minScale);n.set(i,i,i);var r=E.clone();r.color.setHex(16777215*Math.random());var s=new a.Mesh(new f(k,t,new a.Euler,n),r);u((function(e){return[s].concat((0,o.Z)(e))}))},children:(0,S.jsx)("meshPhongMaterial",{specular:1118481,shininess:25,map:A,specularMap:B,normalMap:L})}),c.map((function(e){return(0,S.jsx)("primitive",{object:e},e.uuid)})),(0,S.jsx)(w.z,{minDistance:50,maxDistance:200})]})}}}]);
//# sourceMappingURL=839.535c41e4.chunk.js.map