{"version":3,"file":"static/js/332.aaa6977d.chunk.js","mappings":"gOAAO,IAAMA,EAAeC,OAAOC,WAAa,IAAOD,OAAOC,WAAa,IAAOD,OAAOC,WAC5EC,EAAgBF,OAAOC,WAAa,IAAMD,OAAOG,YAAeH,OAAOG,YAAc,GAErFC,EAAeL,EAAeG,G,gCCMvCG,EAAaC,E,2DAFXC,EAASR,EAAAA,GADA,EACyBC,OAAOQ,iBACzCC,EAAUP,EAAAA,GAFD,EAE2BF,OAAOQ,iBAG3CE,EAAiB,WACrBL,EAAOM,OAASP,EAAAA,GAChBC,EAAOO,QAAQC,yBAEf,IAAK,IAAIC,EAAI,EAAGA,EATH,EASeA,IAC1B,IAAK,IAAIC,EAAI,EAAGA,EAVL,EAUiBA,IAAK,CAC/B,IAAMC,EAAYX,EAAOO,QAAQK,QAXxB,EAWyCH,EAAIC,GACtDC,EAAUE,SAASC,IACjBC,KAAKC,MAAMN,EAAIR,GACfa,KAAKC,MAAMP,EAAIL,GACfW,KAAKE,KAAKf,GACVa,KAAKE,KAAKb,IAEZO,EAAUL,OAASP,EAAAA,GACnBY,EAAUH,yBAGVP,GAAUA,EAASiB,QAAQxB,EAAAA,GAC7BG,EAAAA,KAGEsB,EAAa,WACjB,OACE,kBAAMC,SAAU,CAAC,EAAG,GAAI,GAAIC,eAAa,EAAzC,WACE,0BAAeC,KAAM,CAAC,IAAK,QAC3B,8BAAmBC,MAAO,UAK1BC,EAAW,WACf,IAAMC,GAAYC,EAAAA,EAAAA,UAOlB,OALAC,EAAAA,EAAAA,IAAS,WACPF,EAAKlB,QAAQqB,SAASlB,GAAK,KAC3Be,EAAKlB,QAAQqB,SAASC,GAAK,QAI3B,kBAAMC,IAAKL,EAAMM,YAAU,EAACV,eAAa,EAAzC,WACE,6BAAkBC,KAAM,CAAC,GAAK,GAAK,EAAG,OACtC,8BAAmBC,MAAO,eAK1BS,EAAU,WAEd,IADA,IAAMpB,EAAU,GACPH,EAAI,EAAGA,EArDH,EAqDeA,IAC1B,IAAK,IAAIC,EAAI,EAAGA,EAtDL,EAsDiBA,IAAM,CAChC,IAAMC,EAAiB,IAAIsB,EAAAA,kBAAkB,GAAIlC,EAAAA,GAAc,GAAK,IACpEY,EAAUE,SAAW,IAAIqB,EAAAA,QAASnB,KAAKC,MAAMN,EAAIR,GAAQa,KAAKC,MAAMP,EAAIL,GAASW,KAAKE,KAAKf,GAAQa,KAAKE,KAAKb,IAC7GO,EAAUS,SAASV,EAAKA,EAzDf,EAyD6B,GACtCC,EAAUS,SAASX,EAAI,GAAOA,EA1DrB,EA2DTE,EAAUS,SAASS,EAAI,IACvBlB,EAAUS,SAASe,eAAe,GAClCxB,EAAUyB,OAAO,EAAG,EAAG,GACvBzB,EAAU0B,oBACVzB,EAAQ0B,KAAK3B,GAIjBX,GAAS0B,EAAAA,EAAAA,UACT,IAAMZ,GAAMyB,EAAAA,EAAAA,IAAS,SAACC,GAAD,OAAWA,EAAM1B,OAGtC,OAFA2B,EAAAA,EAAAA,YAAU,kBAAM3B,EAAI,CAAEd,OAAQA,EAAOO,YAAY,KAG/C,wBAAauB,IAAK9B,EAAQY,QAASA,EAASQ,SAAU,CAAC,EAAG,EAAG,MAwBjE,UApBgB,WASd,OARAqB,EAAAA,EAAAA,YAAU,WAGR,OADA9C,OAAO+C,iBAAiB,SAAUrC,GAC3B,WACLV,OAAOgD,oBAAoB,SAAUtC,MAEtC,KAGD,UAAC,KAAD,CAAQuC,SAAO,EAACC,UAAW,gBAAGC,EAAH,EAAGA,GAAH,OAAa7C,EAAW6C,GAAnD,WACE,SAACd,EAAD,KACA,yBAAcT,MAAO,WACrB,6BAAkBH,SAAU,CAAC,GAAK,GAAK,GAAIW,YAAU,EAAC,qBAAoB,KAC1E,SAACZ,EAAD,KACA,SAACK,EAAD","sources":["contants.tsx","webgl/camera_array/Example.tsx"],"sourcesContent":["export const canvas_width = window.innerWidth > 640 ? (window.innerWidth - 300) : window.innerWidth\nexport const canvas_height = window.innerWidth > 640 ? window.innerHeight : (window.innerHeight - 48)\n\nexport const aspect_ratio = canvas_width / canvas_height","import { useEffect, useRef } from \"react\"\nimport { PerspectiveCamera, Vector4 } from \"three\"\nimport { Canvas, useFrame, useThree } from \"@react-three/fiber\"\n\nimport { aspect_ratio, canvas_height, canvas_width } from '../../contants'\n\nconst amount = 6\nconst width = (canvas_width / amount) * window.devicePixelRatio\nconst height = (canvas_height / amount) * window.devicePixelRatio\nlet camera: any, renderer: any\n\nconst onWindowResize = () => {\n  camera.aspect = aspect_ratio\n  camera.current.updateProjectionMatrix()\n\n  for (let y = 0; y < amount; y++) {\n    for (let x = 0; x < amount; x++) {\n      const subcamera = camera.current.cameras[amount * y + x]\n      subcamera.viewport.set(\n        Math.floor(x * width),\n        Math.floor(y * height),\n        Math.ceil(width),\n        Math.ceil(height))\n\n      subcamera.aspect = aspect_ratio\n      subcamera.updateProjectionMatrix()\n    }\n  }\n  if (renderer) renderer.setSize(canvas_width\n  , canvas_height)\n}\n\nconst Background = () => {\n  return (\n    <mesh position={[0, 0, -1]} receiveShadow>\n      <planeGeometry args={[100, 100]} />\n      <meshPhongMaterial color={0x000066} />\n    </mesh>\n  )\n}\n\nconst Cylinder = () => {\n  const mesh: any = useRef()\n  \n  useFrame(() => {\n    mesh.current.rotation.x += 0.005\n    mesh.current.rotation.z += 0.01\n  })\n\n  return (\n    <mesh ref={mesh} castShadow receiveShadow>\n      <cylinderGeometry args={[0.5, 0.5, 1, 32]} />\n      <meshPhongMaterial color={0xff0000} />\n    </mesh>\n  )\n}\n\nconst Cameras = () => {\n  const cameras = []\n  for (let y = 0; y < amount; y ++) {\n    for (let x = 0; x < amount; x ++) {\n      const subcamera: any = new PerspectiveCamera(40, aspect_ratio, 0.1, 10)\n      subcamera.viewport = new Vector4( Math.floor(x * width), Math.floor(y * height), Math.ceil(width), Math.ceil(height))\n      subcamera.position.x = (x / amount) - 0.5\n      subcamera.position.y = 0.5 - (y / amount)\n      subcamera.position.z = 1.5\n      subcamera.position.multiplyScalar(2)\n      subcamera.lookAt(0, 0, 0)\n      subcamera.updateMatrixWorld()\n      cameras.push(subcamera)\n    }\n  }\n\n  camera = useRef()\n  const set = useThree((state) => state.set)\n  useEffect(() => set({ camera: camera.current }), [])\n\n  return (\n    <arrayCamera ref={camera} cameras={cameras} position={[0, 0, 3]} />\n  )\n}\n\nconst Example = () => {\n  useEffect(() => {\n    // default camera is set to arrayCamera, do resize manually\n    window.addEventListener(\"resize\", onWindowResize)\n    return () => {\n      window.removeEventListener(\"resize\", onWindowResize)\n    }\n  }, [])\n\n  return (\n    <Canvas shadows onCreated={({ gl }) => (renderer = gl)}>\n      <Cameras />\n      <ambientLight color={0x222244} />\n      <directionalLight position={[0.5, 0.5, 1]} castShadow shadow-camera-zoom={4} />\n      <Background />\n      <Cylinder />\n    </Canvas>\n  )\n}\n\nexport default Example"],"names":["canvas_width","window","innerWidth","canvas_height","innerHeight","aspect_ratio","camera","renderer","width","devicePixelRatio","height","onWindowResize","aspect","current","updateProjectionMatrix","y","x","subcamera","cameras","viewport","set","Math","floor","ceil","setSize","Background","position","receiveShadow","args","color","Cylinder","mesh","useRef","useFrame","rotation","z","ref","castShadow","Cameras","PerspectiveCamera","Vector4","multiplyScalar","lookAt","updateMatrixWorld","push","useThree","state","useEffect","addEventListener","removeEventListener","shadows","onCreated","gl"],"sourceRoot":""}