"use strict";(self.webpackChunkthreejs_examples_with_fiber=self.webpackChunkthreejs_examples_with_fiber||[]).push([[997],{6710:function(e,t,o){o.d(t,{Pf:function(){return a},Uv:function(){return r},fx:function(){return n}});var n=window.innerWidth>640?window.innerWidth-300:window.innerWidth,r=window.innerWidth>640?window.innerHeight:window.innerHeight-48,a=n/r},1107:function(e,t,o){o.r(t),o.d(t,{default:function(){return x}});var n=o(2791),r=o(7760),a=o(4647),i=o(2794),c=o(9439),s=o(4925),u=o(7462),d=o(3144),l=o(5671),m=o(7326),v=o(136),Z=o(9388),f=o(4942),w=new r.Vector3,h=function(e){(0,v.Z)(o,e);var t=(0,Z.Z)(o);function o(e,n){var a;return(0,l.Z)(this,o),a=t.call(this),(0,f.Z)((0,m.Z)(a),"object",void 0),(0,f.Z)((0,m.Z)(a),"domElement",void 0),(0,f.Z)((0,m.Z)(a),"enabled",!0),(0,f.Z)((0,m.Z)(a),"movementSpeed",1),(0,f.Z)((0,m.Z)(a),"lookSpeed",.005),(0,f.Z)((0,m.Z)(a),"lookVertical",!0),(0,f.Z)((0,m.Z)(a),"autoForward",!1),(0,f.Z)((0,m.Z)(a),"activeLook",!0),(0,f.Z)((0,m.Z)(a),"heightSpeed",!1),(0,f.Z)((0,m.Z)(a),"heightCoef",1),(0,f.Z)((0,m.Z)(a),"heightMin",0),(0,f.Z)((0,m.Z)(a),"heightMax",1),(0,f.Z)((0,m.Z)(a),"constrainVertical",!1),(0,f.Z)((0,m.Z)(a),"verticalMin",0),(0,f.Z)((0,m.Z)(a),"verticalMax",Math.PI),(0,f.Z)((0,m.Z)(a),"mouseDragOn",!1),(0,f.Z)((0,m.Z)(a),"autoSpeedFactor",0),(0,f.Z)((0,m.Z)(a),"mouseX",0),(0,f.Z)((0,m.Z)(a),"mouseY",0),(0,f.Z)((0,m.Z)(a),"moveForward",!1),(0,f.Z)((0,m.Z)(a),"moveBackward",!1),(0,f.Z)((0,m.Z)(a),"moveLeft",!1),(0,f.Z)((0,m.Z)(a),"moveRight",!1),(0,f.Z)((0,m.Z)(a),"moveUp",!1),(0,f.Z)((0,m.Z)(a),"moveDown",!1),(0,f.Z)((0,m.Z)(a),"viewHalfX",0),(0,f.Z)((0,m.Z)(a),"viewHalfY",0),(0,f.Z)((0,m.Z)(a),"lat",0),(0,f.Z)((0,m.Z)(a),"lon",0),(0,f.Z)((0,m.Z)(a),"lookDirection",new r.Vector3),(0,f.Z)((0,m.Z)(a),"spherical",new r.Spherical),(0,f.Z)((0,m.Z)(a),"target",new r.Vector3),(0,f.Z)((0,m.Z)(a),"connect",(function(e){e.setAttribute("tabindex","-1"),e.style.touchAction="none",e.addEventListener("contextmenu",a.contextmenu),e.addEventListener("mousemove",a.onMouseMove),e.addEventListener("mousedown",a.onMouseDown),e.addEventListener("mouseup",a.onMouseUp),a.domElement=e,window.addEventListener("keydown",a.onKeyDown),window.addEventListener("keyup",a.onKeyUp),a.handleResize()})),(0,f.Z)((0,m.Z)(a),"dispose",(function(){var e,t,o,n;null===(e=a.domElement)||void 0===e||e.removeEventListener("contextmenu",a.contextmenu),null===(t=a.domElement)||void 0===t||t.removeEventListener("mousedown",a.onMouseDown),null===(o=a.domElement)||void 0===o||o.removeEventListener("mousemove",a.onMouseMove),null===(n=a.domElement)||void 0===n||n.removeEventListener("mouseup",a.onMouseUp),window.removeEventListener("keydown",a.onKeyDown),window.removeEventListener("keyup",a.onKeyUp)})),(0,f.Z)((0,m.Z)(a),"handleResize",(function(){a.domElement&&(a.viewHalfX=a.domElement.offsetWidth/2,a.viewHalfY=a.domElement.offsetHeight/2)})),(0,f.Z)((0,m.Z)(a),"onMouseDown",(function(e){var t;if(null===(t=a.domElement)||void 0===t||t.focus(),a.activeLook)switch(e.button){case 0:a.moveForward=!0;break;case 2:a.moveBackward=!0}a.mouseDragOn=!0})),(0,f.Z)((0,m.Z)(a),"onMouseUp",(function(e){if(a.activeLook)switch(e.button){case 0:a.moveForward=!1;break;case 2:a.moveBackward=!1}a.mouseDragOn=!1})),(0,f.Z)((0,m.Z)(a),"onMouseMove",(function(e){a.domElement&&(a.mouseX=e.pageX-a.domElement.offsetLeft-a.viewHalfX,a.mouseY=e.pageY-a.domElement.offsetTop-a.viewHalfY)})),(0,f.Z)((0,m.Z)(a),"onKeyDown",(function(e){switch(e.code){case"ArrowUp":case"KeyW":a.moveForward=!0;break;case"ArrowLeft":case"KeyA":a.moveLeft=!0;break;case"ArrowDown":case"KeyS":a.moveBackward=!0;break;case"ArrowRight":case"KeyD":a.moveRight=!0;break;case"KeyR":a.moveUp=!0;break;case"KeyF":a.moveDown=!0}})),(0,f.Z)((0,m.Z)(a),"onKeyUp",(function(e){switch(e.code){case"ArrowUp":case"KeyW":a.moveForward=!1;break;case"ArrowLeft":case"KeyA":a.moveLeft=!1;break;case"ArrowDown":case"KeyS":a.moveBackward=!1;break;case"ArrowRight":case"KeyD":a.moveRight=!1;break;case"KeyR":a.moveUp=!1;break;case"KeyF":a.moveDown=!1}})),(0,f.Z)((0,m.Z)(a),"lookAt",(function(e,t,o){return e instanceof r.Vector3?a.target.copy(e):t&&o&&a.target.set(e,t,o),a.object.lookAt(a.target),a.setOrientation(),(0,m.Z)(a)})),(0,f.Z)((0,m.Z)(a),"update",(function(e){if(a.enabled){if(a.heightSpeed){var t=r.MathUtils.clamp(a.object.position.y,a.heightMin,a.heightMax)-a.heightMin;a.autoSpeedFactor=e*(t*a.heightCoef)}else a.autoSpeedFactor=0;var o=e*a.movementSpeed;(a.moveForward||a.autoForward&&!a.moveBackward)&&a.object.translateZ(-(o+a.autoSpeedFactor)),a.moveBackward&&a.object.translateZ(o),a.moveLeft&&a.object.translateX(-o),a.moveRight&&a.object.translateX(o),a.moveUp&&a.object.translateY(o),a.moveDown&&a.object.translateY(-o);var n=e*a.lookSpeed;a.activeLook||(n=0);var i=1;a.constrainVertical&&(i=Math.PI/(a.verticalMax-a.verticalMin)),a.lon-=a.mouseX*n,a.lookVertical&&(a.lat-=a.mouseY*n*i),a.lat=Math.max(-85,Math.min(85,a.lat));var c=r.MathUtils.degToRad(90-a.lat),s=r.MathUtils.degToRad(a.lon);a.constrainVertical&&(c=r.MathUtils.mapLinear(c,0,Math.PI,a.verticalMin,a.verticalMax));var u=a.object.position;w.setFromSphericalCoords(1,c,s).add(u),a.object.lookAt(w)}})),(0,f.Z)((0,m.Z)(a),"contextmenu",(function(e){return e.preventDefault()})),(0,f.Z)((0,m.Z)(a),"setOrientation",(function(){a.lookDirection.set(0,0,-1).applyQuaternion(a.object.quaternion),a.spherical.setFromVector3(a.lookDirection),a.lat=90-r.MathUtils.radToDeg(a.spherical.phi),a.lon=r.MathUtils.radToDeg(a.spherical.theta)})),a.object=e,a.domElement=n,a.setOrientation(),n&&a.connect(n),a}return(0,d.Z)(o)}(r.EventDispatcher),p=["domElement"],g=n.forwardRef((function(e,t){var o=e.domElement,r=(0,s.Z)(e,p),a=(0,i.w)((function(e){return e.camera})),d=(0,i.w)((function(e){return e.gl})),l=(0,i.w)((function(e){return e.events})),m=o||l.connected||d.domElement,v=n.useState((function(){return new h(a,m)})),Z=(0,c.Z)(v,1)[0];return(0,i.x)((function(e,t){Z.update(t)}),-1),Z?n.createElement("primitive",(0,u.Z)({ref:t,object:Z},r)):null})),b=o(9740),k=o(6710),M=o.p+"static/media/water.092e79d14e8d98a7b9b9.jpg",E=o(184),y=function(){var e=(0,b.m)(M);e.wrapS=e.wrapT=r.RepeatWrapping,e.repeat.set(5,5);var t=(0,n.useRef)();return(0,n.useEffect)((function(){var e=t.current.geometry.attributes.position;e.usage=r.DynamicDrawUsage;for(var o=0;o<e.count;o++){var n=35*Math.sin(o/2);e.setY(o,n)}}),[]),(0,i.x)((function(e){for(var o=10*e.clock.getElapsedTime(),n=t.current.geometry.attributes.position,r=0;r<n.count;r++){var a=35*Math.sin(r/5+(o+r)/7);n.setY(r,a)}n.needsUpdate=!0})),(0,E.jsxs)("mesh",{"rotation-x":-Math.PI/2,ref:t,children:[(0,E.jsx)("planeGeometry",{args:[2e4,2e4,127,127]}),(0,E.jsx)("meshBasicMaterial",{color:17663,map:e})]})},x=function(){return(0,E.jsxs)(a.Xz,{camera:{position:[0,200,0],fov:60,aspect:k.Pf,near:1,far:2e4},gl:{antialias:!0},dpr:devicePixelRatio,children:[(0,E.jsx)("color",{attach:"background",args:[11193599]}),(0,E.jsx)("fogExp2",{attach:"fog",args:[11193599,7e-4]}),(0,E.jsx)(y,{}),(0,E.jsx)(g,{movementSpeed:500,lookSpeed:.1})]})}},9740:function(e,t,o){o.d(t,{m:function(){return s}});var n=o(4942),r=o(7760),a=o(2794),i=o(2791),c=function(e){return e===Object(e)&&!Array.isArray(e)&&"function"!==typeof e};function s(e){var t=(0,a.w)((function(e){return e.gl})),o=(0,a.z)(r.TextureLoader,c(e)?Object.values(e):e);if((0,i.useEffect)((function(){(Array.isArray(o)?o:[o]).forEach(t.initTexture)}),[t,o]),c(e)){var s=Object.keys(e),u={};return s.forEach((function(e){return Object.assign(u,(0,n.Z)({},e,o[s.indexOf(e)]))})),u}return o}s.preload=function(e){return a.z.preload(r.TextureLoader,e)},s.clear=function(e){return a.z.clear(r.TextureLoader,e)}}}]);
//# sourceMappingURL=997.82ad4254.chunk.js.map