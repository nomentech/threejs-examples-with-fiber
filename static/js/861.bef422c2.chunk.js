"use strict";(self.webpackChunkthreejs_examples_with_fiber=self.webpackChunkthreejs_examples_with_fiber||[]).push([[861],{6710:function(n,e,a){a.d(e,{Pf:function(){return r},Uv:function(){return i},fx:function(){return t}});var t=window.innerWidth>640?window.innerWidth-300:window.innerWidth,i=window.innerWidth>640?window.innerHeight:window.innerHeight-48,r=t/i},9861:function(n,e,a){a.r(e);var t=a(323),i=a(7786),r=a(7219),o=a(4647),l=a(6710),s=a(3520),c=a(184),d=[new t.Plane(new t.Vector3(-1,0,0),0),new t.Plane(new t.Vector3(0,-1,0),0),new t.Plane(new t.Vector3(0,0,-1),0)],p={animate:!0,planeX:{constant:0,negated:!1,displayHelper:!1},planeY:{constant:0,negated:!1,displayHelper:!1},planeZ:{constant:0,negated:!1,displayHelper:!1}},u=d.map((function(n){return new t.PlaneHelper(n,2,16777215)})),h=[],w=new t.PlaneGeometry(4,4),m=new t.TorusKnotGeometry(.4,.15,220,60),f=new t.Group;var g=function(){for(var n=[],e=function(e){var a=new t.Group,i=d[e],r=function(n,e,a){var i=new t.Group,r=new t.MeshBasicMaterial;r.depthWrite=!1,r.depthTest=!1,r.colorWrite=!1,r.stencilWrite=!0,r.stencilFunc=t.AlwaysStencilFunc;var o=r.clone();o.side=t.BackSide,o.clippingPlanes=[e],o.stencilFail=t.IncrementWrapStencilOp,o.stencilZFail=t.IncrementWrapStencilOp,o.stencilZPass=t.IncrementWrapStencilOp;var l=new t.Mesh(n,o);l.renderOrder=a,i.add(l);var s=r.clone();s.side=t.FrontSide,s.clippingPlanes=[e],s.stencilFail=t.DecrementWrapStencilOp,s.stencilZFail=t.DecrementWrapStencilOp,s.stencilZPass=t.DecrementWrapStencilOp;var c=new t.Mesh(n,s);return c.renderOrder=a,i.add(c),i}(m,i,e+1),o=new t.MeshStandardMaterial({color:15277667,metalness:.1,roughness:.75,clippingPlanes:d.filter((function(n){return n!==i})),stencilWrite:!0,stencilRef:0,stencilFunc:t.NotEqualStencilFunc,stencilFail:t.ReplaceStencilOp,stencilZFail:t.ReplaceStencilOp,stencilZPass:t.ReplaceStencilOp}),l=new t.Mesh(w,o);l.onAfterRender=function(n){n.clearStencil()},l.renderOrder=e+11,f.add(r),a.add(l),h.push(l),n.push((0,c.jsx)("primitive",{object:a},e))},a=0;a<3;a++)e(a);var i=new t.MeshStandardMaterial({color:16761095,metalness:.1,roughness:.75,clippingPlanes:d,clipShadows:!0,shadowSide:t.DoubleSide}),o=new t.Mesh(m,i);return o.castShadow=!0,o.renderOrder=6,f.add(o),(0,r.x)((function(n,e){p.animate&&(f.rotation.x+=.5*e,f.rotation.y+=.2*e);for(var a=0;a<h.length;a++){var t=d[a],i=h[a];t.coplanarPoint(i.position),i.lookAt(i.position.x-t.normal.x,i.position.y-t.normal.y,i.position.z-t.normal.z)}})),(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)("primitive",{object:f}),n]})},v=function(){return(0,c.jsxs)("mesh",{rotation:[-Math.PI/2,0,0],position:[0,-1,0],receiveShadow:!0,children:[(0,c.jsx)("planeGeometry",{args:[9,9,1,1]}),(0,c.jsx)("shadowMaterial",{color:0,opacity:.25,side:t.DoubleSide})]})};e.default=function(){return(0,c.jsxs)(o.Xz,{camera:{position:[2,2,2],fov:36,aspect:l.Pf,near:1,far:100},shadows:!0,onCreated:function(n){var e=n.gl;e.setClearColor(2503224),e.localClippingEnabled=!0,function(){var n=new i.XS;n.add(p,"animate");var e=n.addFolder("planeX");e.add(p.planeX,"displayHelper").onChange((function(n){return u[0].visible=n})),e.add(p.planeX,"constant").min(-1).max(1).onChange((function(n){return d[0].constant=n})),e.add(p.planeX,"negated").onChange((function(){d[0].negate(),p.planeX.constant=d[0].constant})),e.open();var a=n.addFolder("planeY");a.add(p.planeY,"displayHelper").onChange((function(n){return u[1].visible=n})),a.add(p.planeY,"constant").min(-1).max(1).onChange((function(n){return d[1].constant=n})),a.add(p.planeY,"negated").onChange((function(){d[1].negate(),p.planeY.constant=d[1].constant})),a.open();var t=n.addFolder("planeZ");t.add(p.planeZ,"displayHelper").onChange((function(n){return u[2].visible=n})),t.add(p.planeZ,"constant").min(-1).max(1).onChange((function(n){return d[2].constant=n})),t.add(p.planeZ,"negated").onChange((function(){d[2].negate(),p.planeZ.constant=d[2].constant})),t.open()}()},children:[(0,c.jsx)("ambientLight",{args:[16777215,.5]}),(0,c.jsx)("directionalLight",{args:[16777215,1],position:[5,10,7.5],castShadow:!0,"shadow-camera-right":2,"shadow-camera-left":-2,"shadow-camera-top":2,"shadow-camera-bottom":-2,"shadow-mapSize-width":1024,"shadow-camera-height":1024}),(0,c.jsx)(c.Fragment,{children:u.map((function(n){return n.visible=!1,(0,c.jsx)("primitive",{object:n},n.uuid)}))}),(0,c.jsx)(g,{}),(0,c.jsx)(v,{}),(0,c.jsx)(s.z,{minDistance:2,maxDistance:20})]})}}}]);
//# sourceMappingURL=861.bef422c2.chunk.js.map