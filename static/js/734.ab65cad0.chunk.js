"use strict";(self.webpackChunkthreejs_examples_with_fiber=self.webpackChunkthreejs_examples_with_fiber||[]).push([[734],{6734:function(e,r,t){t.r(r),t.d(r,{default:function(){return L}});var n=t(2791),a=t(323),u=t(4647),i=t(7219),c=t(5647);function o(e,r){for(var t=arguments.length,a=new Array(t>2?t-2:0),u=2;u<t;u++)a[u-2]=arguments[u];var o=n.useRef(),s=(0,i.w)((function(e){return e.scene}));return n.useEffect((function(){return e&&r&&null!=e&&e.current&&(o.current=(0,c.Z)(r,[e.current].concat(a)),o.current&&s.add(o.current)),!e&&o.current&&s.remove(o.current),function(){o.current&&s.remove(o.current)}}),[s,r,e,a]),(0,i.x)((function(){var e;null!=(e=o.current)&&e.update&&o.current.update()})),o}var s,f,h,l,p,m,d,w,x=t(4925),v=t(7462),j=t(3599),g=["makeDefault"],b=n.forwardRef((function(e,r){var t=e.makeDefault,a=(0,x.Z)(e,g),u=(0,i.w)((function(e){return e.set})),c=(0,i.w)((function(e){return e.camera})),o=(0,i.w)((function(e){return e.size})),s=n.useRef();return n.useLayoutEffect((function(){var e=s.current;e&&!a.manual&&(e.aspect=o.width/o.height,e.updateProjectionMatrix())}),[o,a]),n.useLayoutEffect((function(){if(t&&s.current){var e=c;return u((function(){return{camera:s.current}})),function(){return u((function(){return{camera:e}}))}}}),[c,s,t,u]),n.createElement("perspectiveCamera",(0,v.Z)({ref:(0,j.Z)([s,r])},a))})),M=["makeDefault"],k=n.forwardRef((function(e,r){var t=e.makeDefault,a=(0,x.Z)(e,M),u=(0,i.w)((function(e){return e.set})),c=(0,i.w)((function(e){return e.camera})),o=(0,i.w)((function(e){return e.size})),s=n.useRef();return n.useLayoutEffect((function(){s.current&&!a.manual&&s.current.updateProjectionMatrix()}),[o,a]),n.useLayoutEffect((function(){if(t&&s.current){var e=c;return u((function(){return{camera:s.current}})),function(){return u((function(){return{camera:e}}))}}}),[c,s,t,u]),n.createElement("orthographicCamera",(0,v.Z)({left:o.width/-2,right:o.width/2,top:o.height/2,bottom:o.height/-2,ref:(0,j.Z)([s,r])},a))})),y=t(184),E=window.innerWidth,R=window.innerHeight,C=E/R,Z=function(){var e=(0,i.w)(),r=e.gl,t=e.scene,u=e.camera;return(f=r).autoClear=!1,h=(0,n.useRef)(),l=(0,n.useRef)(),p=o(h,a.CameraHelper),m=o(l,a.CameraHelper),window.addEventListener("keydown",(function(e){switch(e.key){case"o":case"O":d=l,w=m;break;case"p":case"P":d=h,w=p}})),(0,n.useEffect)((function(){d=h,w=p}),[]),(0,i.x)((function(){var e=5e-4*Date.now();s&&(s.current.position.set(700*Math.cos(e),700*Math.sin(e),700*Math.sin(e)),s.current.children[0].position.set(70*Math.cos(2*e),0,70*Math.sin(e))),d===h&&0!==s.current.position.length()?(h.fov=35+30*Math.sin(.5*e),h.far=s.current.position.length(),p&&m&&(p.current.update(),p.visible=!0,m.visible=!1)):(l.far=s.current.position.length(),p.current&&m.current&&(m.current.update(),m.visible=!0,p.visible=!1)),l.current&&h.current&&(l.current.lookAt(s.current.position),h.current.lookAt(s.current.position)),f&&w&&(f.clear(),w.visible=!1,f.setViewport(0,0,E/2,R),f.render(t,d.current),w.visible=!0,f.setViewport(E/2,0,E/2,R),f.render(t,u))})),(0,y.jsxs)("group",{children:[(0,y.jsx)(b,{fov:50,aspect:.5*C,near:150,far:1e3,rotation:[0,Math.PI,0],ref:h}),(0,y.jsx)(k,{left:-300*C/2,right:300*C/2,top:300,bottom:-300,near:150,far:1e3,rotation:[0,Math.PI,0],ref:l}),(0,y.jsxs)("mesh",{position:[0,0,150],children:[(0,y.jsx)("sphereGeometry",{args:[5,16,8]}),(0,y.jsx)("meshBasicMaterial",{color:255,wireframe:!0})]})]})},_=function(){for(var e=[],r=0;r<1e4;r++)e.push(a.MathUtils.randFloatSpread(2e3)),e.push(a.MathUtils.randFloatSpread(2e3)),e.push(a.MathUtils.randFloatSpread(2e3));return(0,y.jsxs)("points",{children:[(0,y.jsx)("bufferGeometry",{attach:"geometry",children:(0,y.jsx)("bufferAttribute",{name:"position",array:e,itemSize:3})}),(0,y.jsx)("pointsMaterial",{color:8947848})]})},D=function(){return s=(0,n.useRef)(),(0,y.jsxs)("mesh",{ref:s,children:[(0,y.jsx)("sphereGeometry",{args:[100,16,8]}),(0,y.jsx)("meshBasicMaterial",{color:16777215,wireframe:!0}),(0,y.jsxs)("mesh",{position:[0,150,0],children:[(0,y.jsx)("sphereGeometry",{args:[50,16,8]}),(0,y.jsx)("meshBasicMaterial",{color:65280,wireframe:!0})]})]})},L=function(){return(0,y.jsxs)(u.Xz,{camera:{position:[0,0,2500],fov:50,aspect:.5*C,near:1,far:1e4},children:[(0,y.jsx)("color",{attach:"background",args:["black"]}),(0,y.jsx)(Z,{}),(0,y.jsx)(D,{}),(0,y.jsx)(_,{})]})}}}]);
//# sourceMappingURL=734.ab65cad0.chunk.js.map