{"version":3,"file":"static/js/612.e0fc6990.chunk.js","mappings":"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","sources":["contants.tsx","webgl/geometry_dynamic/Example.tsx","../node_modules/three-stdlib/controls/FirstPersonControls.js","../node_modules/@react-three/drei/core/FirstPersonControls.js","../node_modules/@react-three/drei/core/useTexture.js"],"sourcesContent":["export const canvas_width = window.innerWidth > 640 ? (window.innerWidth - 300) : window.innerWidth\nexport const canvas_height = window.innerWidth > 640 ? window.innerHeight : (window.innerHeight - 48)\n\nexport const aspect_ratio = canvas_width / canvas_height","import { useEffect, useRef } from 'react'\nimport * as THREE from 'three'\nimport { Canvas, useFrame } from '@react-three/fiber'\nimport { FirstPersonControls, useTexture } from '@react-three/drei'\n\nimport { aspect_ratio } from '../../contants'\nimport water from '../../textures/water.jpg'\n\nconst worldWidth = 128, worldDepth = 128\n\nconst Mesh = () => {\n  const texture = useTexture(water)\n  texture.wrapS = texture.wrapT = THREE.RepeatWrapping\n  texture.repeat.set(5, 5)\n\n  const meshRef: any = useRef()\n  useEffect(() => {\n    const position = meshRef.current.geometry.attributes.position \n    position.usage = THREE.DynamicDrawUsage\n\n    for (let i =0; i<position.count; i++) {\n      const y = 35 * Math.sin(i/2)\n      position.setY(i, y)\n    }\n  }, [])\n\n  useFrame(({ clock }) => {\n      const time = clock.getElapsedTime() * 10\n\n      const position = meshRef.current.geometry.attributes.position\n\n      for (let i =0; i<position.count; i++) {\n        const y = 35 * Math.sin(i/5 + (time+i)/7)\n        position.setY(i, y)\n      }\n\n      position.needsUpdate = true\n  })\n\n  return (\n    <mesh rotation-x={-Math.PI/2} ref={meshRef} >\n      <planeGeometry args={[20000, 20000, worldWidth - 1, worldDepth - 1]} />\n      <meshBasicMaterial color={0x0044ff} map={texture} />\n    </mesh>\n  )\n}\n\nconst Example = () => {\n  return (\n    <Canvas camera={{ position: [0, 200, 0], fov: 60, aspect: aspect_ratio, near: 1, far: 20000 }}\n      gl={{ antialias: true }} dpr={devicePixelRatio} >\n      <color attach='background' args={[0xaaccff]} />\n      <fogExp2 attach='fog' args={[0xaaccff, 0.0007]} />\n      <Mesh />\n      <FirstPersonControls movementSpeed={500} lookSpeed={0.1} />\n    </Canvas>\n  )\n}\n\nexport default Example","import _defineProperty from '@babel/runtime/helpers/esm/defineProperty';\nimport { Vector3, EventDispatcher, Spherical, MathUtils } from 'three';\n\nconst targetPosition = new Vector3();\nclass FirstPersonControls extends EventDispatcher {\n  // internals\n  constructor(object, _domElement) {\n    super();\n\n    _defineProperty(this, \"object\", void 0);\n\n    _defineProperty(this, \"domElement\", void 0);\n\n    _defineProperty(this, \"enabled\", true);\n\n    _defineProperty(this, \"movementSpeed\", 1.0);\n\n    _defineProperty(this, \"lookSpeed\", 0.005);\n\n    _defineProperty(this, \"lookVertical\", true);\n\n    _defineProperty(this, \"autoForward\", false);\n\n    _defineProperty(this, \"activeLook\", true);\n\n    _defineProperty(this, \"heightSpeed\", false);\n\n    _defineProperty(this, \"heightCoef\", 1.0);\n\n    _defineProperty(this, \"heightMin\", 0.0);\n\n    _defineProperty(this, \"heightMax\", 1.0);\n\n    _defineProperty(this, \"constrainVertical\", false);\n\n    _defineProperty(this, \"verticalMin\", 0);\n\n    _defineProperty(this, \"verticalMax\", Math.PI);\n\n    _defineProperty(this, \"mouseDragOn\", false);\n\n    _defineProperty(this, \"autoSpeedFactor\", 0.0);\n\n    _defineProperty(this, \"mouseX\", 0);\n\n    _defineProperty(this, \"mouseY\", 0);\n\n    _defineProperty(this, \"moveForward\", false);\n\n    _defineProperty(this, \"moveBackward\", false);\n\n    _defineProperty(this, \"moveLeft\", false);\n\n    _defineProperty(this, \"moveRight\", false);\n\n    _defineProperty(this, \"moveUp\", false);\n\n    _defineProperty(this, \"moveDown\", false);\n\n    _defineProperty(this, \"viewHalfX\", 0);\n\n    _defineProperty(this, \"viewHalfY\", 0);\n\n    _defineProperty(this, \"lat\", 0);\n\n    _defineProperty(this, \"lon\", 0);\n\n    _defineProperty(this, \"lookDirection\", new Vector3());\n\n    _defineProperty(this, \"spherical\", new Spherical());\n\n    _defineProperty(this, \"target\", new Vector3());\n\n    _defineProperty(this, \"connect\", domElement => {\n      domElement.setAttribute('tabindex', '-1');\n      domElement.style.touchAction = 'none';\n      domElement.addEventListener('contextmenu', this.contextmenu);\n      domElement.addEventListener('mousemove', this.onMouseMove);\n      domElement.addEventListener('mousedown', this.onMouseDown);\n      domElement.addEventListener('mouseup', this.onMouseUp);\n      this.domElement = domElement;\n      window.addEventListener('keydown', this.onKeyDown);\n      window.addEventListener('keyup', this.onKeyUp);\n      this.handleResize();\n    });\n\n    _defineProperty(this, \"dispose\", () => {\n      var _this$domElement, _this$domElement2, _this$domElement3, _this$domElement4;\n\n      (_this$domElement = this.domElement) === null || _this$domElement === void 0 ? void 0 : _this$domElement.removeEventListener('contextmenu', this.contextmenu);\n      (_this$domElement2 = this.domElement) === null || _this$domElement2 === void 0 ? void 0 : _this$domElement2.removeEventListener('mousedown', this.onMouseDown);\n      (_this$domElement3 = this.domElement) === null || _this$domElement3 === void 0 ? void 0 : _this$domElement3.removeEventListener('mousemove', this.onMouseMove);\n      (_this$domElement4 = this.domElement) === null || _this$domElement4 === void 0 ? void 0 : _this$domElement4.removeEventListener('mouseup', this.onMouseUp);\n      window.removeEventListener('keydown', this.onKeyDown);\n      window.removeEventListener('keyup', this.onKeyUp);\n    });\n\n    _defineProperty(this, \"handleResize\", () => {\n      if (this.domElement) {\n        this.viewHalfX = this.domElement.offsetWidth / 2;\n        this.viewHalfY = this.domElement.offsetHeight / 2;\n      }\n    });\n\n    _defineProperty(this, \"onMouseDown\", event => {\n      var _this$domElement5;\n\n      (_this$domElement5 = this.domElement) === null || _this$domElement5 === void 0 ? void 0 : _this$domElement5.focus();\n\n      if (this.activeLook) {\n        switch (event.button) {\n          case 0:\n            this.moveForward = true;\n            break;\n\n          case 2:\n            this.moveBackward = true;\n            break;\n        }\n      }\n\n      this.mouseDragOn = true;\n    });\n\n    _defineProperty(this, \"onMouseUp\", event => {\n      if (this.activeLook) {\n        switch (event.button) {\n          case 0:\n            this.moveForward = false;\n            break;\n\n          case 2:\n            this.moveBackward = false;\n            break;\n        }\n      }\n\n      this.mouseDragOn = false;\n    });\n\n    _defineProperty(this, \"onMouseMove\", event => {\n      if (this.domElement) {\n        this.mouseX = event.pageX - this.domElement.offsetLeft - this.viewHalfX;\n        this.mouseY = event.pageY - this.domElement.offsetTop - this.viewHalfY;\n      }\n    });\n\n    _defineProperty(this, \"onKeyDown\", event => {\n      switch (event.code) {\n        case 'ArrowUp':\n        case 'KeyW':\n          this.moveForward = true;\n          break;\n\n        case 'ArrowLeft':\n        case 'KeyA':\n          this.moveLeft = true;\n          break;\n\n        case 'ArrowDown':\n        case 'KeyS':\n          this.moveBackward = true;\n          break;\n\n        case 'ArrowRight':\n        case 'KeyD':\n          this.moveRight = true;\n          break;\n\n        case 'KeyR':\n          this.moveUp = true;\n          break;\n\n        case 'KeyF':\n          this.moveDown = true;\n          break;\n      }\n    });\n\n    _defineProperty(this, \"onKeyUp\", event => {\n      switch (event.code) {\n        case 'ArrowUp':\n        case 'KeyW':\n          this.moveForward = false;\n          break;\n\n        case 'ArrowLeft':\n        case 'KeyA':\n          this.moveLeft = false;\n          break;\n\n        case 'ArrowDown':\n        case 'KeyS':\n          this.moveBackward = false;\n          break;\n\n        case 'ArrowRight':\n        case 'KeyD':\n          this.moveRight = false;\n          break;\n\n        case 'KeyR':\n          this.moveUp = false;\n          break;\n\n        case 'KeyF':\n          this.moveDown = false;\n          break;\n      }\n    });\n\n    _defineProperty(this, \"lookAt\", (x, y, z) => {\n      if (x instanceof Vector3) {\n        this.target.copy(x);\n      } else if (y && z) {\n        this.target.set(x, y, z);\n      }\n\n      this.object.lookAt(this.target);\n      this.setOrientation();\n      return this;\n    });\n\n    _defineProperty(this, \"update\", delta => {\n      if (!this.enabled) return;\n\n      if (this.heightSpeed) {\n        const y = MathUtils.clamp(this.object.position.y, this.heightMin, this.heightMax);\n        const heightDelta = y - this.heightMin;\n        this.autoSpeedFactor = delta * (heightDelta * this.heightCoef);\n      } else {\n        this.autoSpeedFactor = 0.0;\n      }\n\n      const actualMoveSpeed = delta * this.movementSpeed;\n\n      if (this.moveForward || this.autoForward && !this.moveBackward) {\n        this.object.translateZ(-(actualMoveSpeed + this.autoSpeedFactor));\n      }\n\n      if (this.moveBackward) this.object.translateZ(actualMoveSpeed);\n      if (this.moveLeft) this.object.translateX(-actualMoveSpeed);\n      if (this.moveRight) this.object.translateX(actualMoveSpeed);\n      if (this.moveUp) this.object.translateY(actualMoveSpeed);\n      if (this.moveDown) this.object.translateY(-actualMoveSpeed);\n      let actualLookSpeed = delta * this.lookSpeed;\n\n      if (!this.activeLook) {\n        actualLookSpeed = 0;\n      }\n\n      let verticalLookRatio = 1;\n\n      if (this.constrainVertical) {\n        verticalLookRatio = Math.PI / (this.verticalMax - this.verticalMin);\n      }\n\n      this.lon -= this.mouseX * actualLookSpeed;\n      if (this.lookVertical) this.lat -= this.mouseY * actualLookSpeed * verticalLookRatio;\n      this.lat = Math.max(-85, Math.min(85, this.lat));\n      let phi = MathUtils.degToRad(90 - this.lat);\n      const theta = MathUtils.degToRad(this.lon);\n\n      if (this.constrainVertical) {\n        phi = MathUtils.mapLinear(phi, 0, Math.PI, this.verticalMin, this.verticalMax);\n      }\n\n      const position = this.object.position;\n      targetPosition.setFromSphericalCoords(1, phi, theta).add(position);\n      this.object.lookAt(targetPosition);\n    });\n\n    _defineProperty(this, \"contextmenu\", event => event.preventDefault());\n\n    _defineProperty(this, \"setOrientation\", () => {\n      this.lookDirection.set(0, 0, -1).applyQuaternion(this.object.quaternion);\n      this.spherical.setFromVector3(this.lookDirection);\n      this.lat = 90 - MathUtils.radToDeg(this.spherical.phi);\n      this.lon = MathUtils.radToDeg(this.spherical.theta);\n    });\n\n    this.object = object;\n    this.domElement = _domElement;\n    this.setOrientation();\n    if (_domElement) this.connect(_domElement);\n  }\n\n}\n\nexport { FirstPersonControls };\n","import _extends from '@babel/runtime/helpers/esm/extends';\nimport * as React from 'react';\nimport { useThree, useFrame } from '@react-three/fiber';\nimport { FirstPersonControls as FirstPersonControls$1 } from 'three-stdlib';\n\nconst FirstPersonControls = /*#__PURE__*/React.forwardRef(({\n  domElement,\n  ...props\n}, ref) => {\n  const camera = useThree(state => state.camera);\n  const gl = useThree(state => state.gl);\n  const events = useThree(state => state.events);\n  const explDomElement = domElement || events.connected || gl.domElement;\n  const [controls] = React.useState(() => new FirstPersonControls$1(camera, explDomElement));\n  useFrame((_, delta) => {\n    controls.update(delta);\n  }, -1);\n  return controls ? /*#__PURE__*/React.createElement(\"primitive\", _extends({\n    ref: ref,\n    object: controls\n  }, props)) : null;\n});\n\nexport { FirstPersonControls };\n","import { TextureLoader } from 'three';\nimport { useThree, useLoader } from '@react-three/fiber';\nimport { useEffect } from 'react';\n\nconst IsObject = url => url === Object(url) && !Array.isArray(url) && typeof url !== 'function';\nfunction useTexture(input) {\n  const gl = useThree(state => state.gl);\n  const textures = useLoader(TextureLoader, IsObject(input) ? Object.values(input) : input); // https://github.com/mrdoob/three.js/issues/22696\n  // Upload the texture to the GPU immediately instead of waiting for the first render\n\n  useEffect(() => {\n    const array = Array.isArray(textures) ? textures : [textures];\n    array.forEach(gl.initTexture);\n  }, [gl, textures]);\n\n  if (IsObject(input)) {\n    const keys = Object.keys(input);\n    const keyed = {};\n    keys.forEach(key => Object.assign(keyed, {\n      [key]: textures[keys.indexOf(key)]\n    }));\n    return keyed;\n  } else {\n    return textures;\n  }\n}\n\nuseTexture.preload = url => useLoader.preload(TextureLoader, url);\n\nuseTexture.clear = input => useLoader.clear(TextureLoader, input);\n\nexport { IsObject, useTexture };\n"],"names":["canvas_width","window","innerWidth","canvas_height","innerHeight","aspect_ratio","Mesh","texture","useTexture","water","wrapS","wrapT","THREE","repeat","set","meshRef","useRef","useEffect","position","current","geometry","attributes","usage","i","count","y","Math","sin","setY","useFrame","time","clock","getElapsedTime","needsUpdate","PI","ref","args","worldWidth","worldDepth","color","map","camera","fov","aspect","near","far","gl","antialias","dpr","devicePixelRatio","attach","FirstPersonControls","movementSpeed","lookSpeed","targetPosition","Vector3","object","_domElement","_defineProperty","Spherical","domElement","setAttribute","style","touchAction","addEventListener","contextmenu","onMouseMove","onMouseDown","onMouseUp","onKeyDown","onKeyUp","handleResize","_this$domElement","_this$domElement2","_this$domElement3","_this$domElement4","removeEventListener","viewHalfX","offsetWidth","viewHalfY","offsetHeight","event","_this$domElement5","focus","activeLook","button","moveForward","moveBackward","mouseDragOn","mouseX","pageX","offsetLeft","mouseY","pageY","offsetTop","code","moveLeft","moveRight","moveUp","moveDown","x","z","target","copy","lookAt","setOrientation","delta","enabled","heightSpeed","heightDelta","MathUtils","heightMin","heightMax","autoSpeedFactor","heightCoef","actualMoveSpeed","autoForward","translateZ","translateX","translateY","actualLookSpeed","verticalLookRatio","constrainVertical","verticalMax","verticalMin","lon","lookVertical","lat","max","min","phi","theta","setFromSphericalCoords","add","preventDefault","lookDirection","applyQuaternion","quaternion","spherical","setFromVector3","connect","EventDispatcher","React","props","useThree","state","events","explDomElement","connected","FirstPersonControls$1","controls","_","update","_extends","IsObject","url","Object","Array","isArray","input","textures","useLoader","TextureLoader","values","forEach","initTexture","keys","keyed","key","assign","indexOf","preload","clear"],"sourceRoot":""}