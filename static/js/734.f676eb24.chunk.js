"use strict";(self.webpackChunkthreejs_examples_with_fiber=self.webpackChunkthreejs_examples_with_fiber||[]).push([[734],{6734:function(e,r,t){t.r(r),t.d(r,{default:function(){return A}});var n=t(2791),i=t(323),a=t(4647),u=t(7219),o=t(5647);function c(e,r){for(var t=arguments.length,i=new Array(t>2?t-2:0),a=2;a<t;a++)i[a-2]=arguments[a];var c=n.useRef(),s=(0,u.w)((function(e){return e.scene}));return n.useEffect((function(){return e&&r&&null!=e&&e.current&&(c.current=(0,o.Z)(r,[e.current].concat(i)),c.current&&s.add(c.current)),!e&&c.current&&s.remove(c.current),function(){c.current&&s.remove(c.current)}}),[s,r,e,i]),(0,u.x)((function(){var e;null!=(e=c.current)&&e.update&&c.current.update()})),c}var s,f,h,l,d,p,m,w,x,v=t(4925),j=t(7462),g=t(3599),b=["makeDefault"],k=n.forwardRef((function(e,r){var t=e.makeDefault,i=(0,v.Z)(e,b),a=(0,u.w)((function(e){return e.set})),o=(0,u.w)((function(e){return e.camera})),c=(0,u.w)((function(e){return e.size})),s=n.useRef();return n.useLayoutEffect((function(){var e=s.current;e&&!i.manual&&(e.aspect=c.width/c.height,e.updateProjectionMatrix())}),[c,i]),n.useLayoutEffect((function(){if(t&&s.current){var e=o;return a((function(){return{camera:s.current}})),function(){return a((function(){return{camera:e}}))}}}),[o,s,t,a]),n.createElement("perspectiveCamera",(0,j.Z)({ref:(0,g.Z)([s,r])},i))})),M=["makeDefault"],y=n.forwardRef((function(e,r){var t=e.makeDefault,i=(0,v.Z)(e,M),a=(0,u.w)((function(e){return e.set})),o=(0,u.w)((function(e){return e.camera})),c=(0,u.w)((function(e){return e.size})),s=n.useRef();return n.useLayoutEffect((function(){s.current&&!i.manual&&s.current.updateProjectionMatrix()}),[c,i]),n.useLayoutEffect((function(){if(t&&s.current){var e=o;return a((function(){return{camera:s.current}})),function(){return a((function(){return{camera:e}}))}}}),[o,s,t,a]),n.createElement("orthographicCamera",(0,j.Z)({left:c.width/-2,right:c.width/2,top:c.height/2,bottom:c.height/-2,ref:(0,g.Z)([s,r])},i))})),E=t(184),R=window.innerWidth>640?window.innerWidth-300:window.innerWidth,C=window.innerWidth>640?window.innerHeight:window.innerHeight-48,Z=R/C,D=function(e){switch(e.key){case"o":case"O":w=d,x=m;break;case"p":case"P":w=l,x=p}},L=function(){var e=(0,u.w)(),r=e.gl,t=e.scene;return(f=r).autoClear=!1,l=(0,n.useRef)(),d=(0,n.useRef)(),p=c(l,i.CameraHelper),m=c(d,i.CameraHelper),(0,n.useEffect)((function(){return w=l,x=p,window.addEventListener("keydown",D),function(){return window.removeEventListener("keydown",D)}}),[]),(0,u.x)((function(){var e=5e-4*Date.now();s&&(s.current.position.set(700*Math.cos(e),700*Math.sin(e),700*Math.sin(e)),s.current.children[0].position.set(70*Math.cos(2*e),0,70*Math.sin(e))),w===l&&0!==s.current.position.length()?(l.fov=35+30*Math.sin(.5*e),l.far=s.current.position.length(),p&&m&&(p.current.update(),p.visible=!0,m.visible=!1)):(d.far=s.current.position.length(),p.current&&m.current&&(m.current.update(),m.visible=!0,p.visible=!1)),d.current&&l.current&&(d.current.lookAt(s.current.position),l.current.lookAt(s.current.position)),f&&x&&(f.clear(),x.visible=!1,f.setViewport(0,0,R/2,C),f.render(t,w.current),x.visible=!0,f.setViewport(R/2,0,R/2,C),f.render(t,h.current))})),(0,E.jsxs)("group",{children:[(0,E.jsx)(k,{fov:50,aspect:.5*Z,near:150,far:1e3,rotation:[0,Math.PI,0],ref:l}),(0,E.jsx)(y,{left:-300*Z/2,right:300*Z/2,top:300,bottom:-300,near:150,far:1e3,rotation:[0,Math.PI,0],ref:d}),(0,E.jsxs)("mesh",{position:[0,0,150],children:[(0,E.jsx)("sphereGeometry",{args:[5,16,8]}),(0,E.jsx)("meshBasicMaterial",{color:255,wireframe:!0})]})]})},_=function(){return h=(0,n.useRef)(),(0,E.jsx)(k,{makeDefault:!0,ref:h,position:[0,0,2500],fov:50,aspect:.5*Z,near:1,far:1e4})},P=function(){for(var e=[],r=0;r<1e4;r++)e.push(i.MathUtils.randFloatSpread(2e3)),e.push(i.MathUtils.randFloatSpread(2e3)),e.push(i.MathUtils.randFloatSpread(2e3));return(0,E.jsxs)("points",{children:[(0,E.jsx)("bufferGeometry",{attach:"geometry",children:(0,E.jsx)("bufferAttribute",{name:"position",array:e,itemSize:3})}),(0,E.jsx)("pointsMaterial",{color:8947848})]})},z=function(){return s=(0,n.useRef)(),(0,E.jsxs)("mesh",{ref:s,children:[(0,E.jsx)("sphereGeometry",{args:[100,16,8]}),(0,E.jsx)("meshBasicMaterial",{color:16777215,wireframe:!0}),(0,E.jsxs)("mesh",{position:[0,150,0],children:[(0,E.jsx)("sphereGeometry",{args:[50,16,8]}),(0,E.jsx)("meshBasicMaterial",{color:65280,wireframe:!0})]})]})},A=function(){return(0,E.jsxs)(a.Xz,{camera:{manual:!0},children:[(0,E.jsx)("color",{attach:"background",args:["black"]}),(0,E.jsx)(_,{}),(0,E.jsx)(L,{}),(0,E.jsx)(z,{}),(0,E.jsx)(P,{})]})}}}]);
//# sourceMappingURL=734.f676eb24.chunk.js.map