"use strict";(self.webpackChunkthreejs_examples_with_fiber=self.webpackChunkthreejs_examples_with_fiber||[]).push([[746],{6746:function(e,i,t){t.r(i);var o,n,a,d,s,r,l,c,f,u,h=t(2791),m=t(323),p=t(7219),w=t(4647),g=t(3655),v=t(7786),b=t(184),k=[],y=!1,j=0,x="".concat("/threejs-examples-with-fiber","/models/Soldier.glb");g.L.preload(x);var E=function(e,i){e.enabled=!0,e.setEffectiveTimeScale(1),e.setEffectiveWeight(i)},C=function(){E(l,G["modify idle weight"]),E(c,G["modify walk weight"]),E(f,G["modify run weight"]),u.forEach((function(e){e.play()}))},S=function(){u.forEach((function(e){e.paused=!0}))},F=function(){u.forEach((function(e){e.paused=!1}))},A=function(e){o.visible=e},L=function(e){n.visible=e},W=function(e){a.timeScale=e},_=function(e,i,t){var o=z(t);y=!1,F(),e===l?P(e,i,o):M(e,i,o)},z=function(e){return G["use default duration"]?e:G["set custom duration"]},M=function(e,i,t){a.addEventListener("loop",(function o(n){n.action===e&&(a.removeEventListener("loop",o),P(e,i,t))}))},P=function(e,i,t){E(i,1),i.time=0,e.crossFadeTo(i,t,!0)},G={"show model":!0,"show skeleton":!0,"deactivate all":function(){u.forEach((function(e){e.stop()}))},"activate all":C,"pause/continue":function(){y?(y=!1,F()):l.paused?F():S()},"make single step":function(){F(),y=!0,j=G["modify step size"]},"modify step size":.05,"from walk to idle":function(){_(c,l,1)},"from idle to walk":function(){_(l,c,.5)},"from walk to run":function(){_(c,f,2.5)},"from run to walk":function(){_(f,c,5)},"use default duration":!0,"set custom duration":3.5,"modify idle weight":0,"modify walk weight":1,"modify run weight":0,"modify time scale":1},T=function(){var e=(0,g.L)(x),i=e.scene,t=e.animations;return o=i,a=new m.AnimationMixer(o),l=a.clipAction(t[0]),c=a.clipAction(t[3]),f=a.clipAction(t[1]),u=[l,c,f],(n=new m.SkeletonHelper(i)).visible=!0,(0,p.x)((function(e,i){d=l.getEffectiveWeight(),s=c.getEffectiveWeight(),r=f.getEffectiveWeight(),G["modify idle weight"]=d,G["modify walk weight"]=s,G["modify run weight"]=r,1===d&&0===s&&0===r&&(k[0].disable(),k[1].enable(),k[2].disable(),k[3].disable()),0===d&&1===s&&0===r&&(k[0].enable(),k[1].disable(),k[2].enable(),k[3].disable()),0===d&&0===s&&1===r&&(k[0].disable(),k[1].disable(),k[2].disable(),k[3].enable());var t=i;y&&(t=j,j=0),a.update(t)})),(0,h.useEffect)((function(){i.traverse((function(e){return e.isMesh&&(e.castShadow=!0)})),C()}),[i]),(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)("primitive",{object:i}),(0,b.jsx)("primitive",{object:n}),(0,b.jsx)(B,{})]})},X=function(){return(0,b.jsxs)("mesh",{rotation:[-Math.PI/2,0,0],receiveShadow:!0,children:[(0,b.jsx)("planeGeometry",{args:[100,100]}),(0,b.jsx)("meshPhongMaterial",{color:10066329,depthWrite:!1})]})},B=function(){var e=new v.XS({width:310});return(0,h.useEffect)((function(){var i=e.addFolder("Visibility"),t=e.addFolder("Activation/Deactivation"),o=e.addFolder("Pausing/Stepping"),n=e.addFolder("Crossfading"),a=e.addFolder("Blend Weights"),d=e.addFolder("General Speed");i.add(G,"show model").onChange(A),i.add(G,"show skeleton").onChange(L),t.add(G,"deactivate all"),t.add(G,"activate all"),o.add(G,"pause/continue"),o.add(G,"make single step"),o.add(G,"modify step size",.01,.1,.001),k.push(n.add(G,"from walk to idle")),k.push(n.add(G,"from idle to walk")),k.push(n.add(G,"from walk to run")),k.push(n.add(G,"from run to walk")),n.add(G,"use default duration"),n.add(G,"set custom duration",0,10,.01),a.add(G,"modify idle weight",0,1,.01).listen().onChange((function(e){E(l,e)})),a.add(G,"modify walk weight",0,1,.01).listen().onChange((function(e){E(c,e)})),a.add(G,"modify run weight",0,1,.01).listen().onChange((function(e){E(f,e)})),d.add(G,"modify time scale",0,1.5,.01).onChange(W),i.open(),t.open(),o.open(),n.open(),a.open(),d.open()}),[]),null};i.default=function(){return(0,b.jsxs)(w.Xz,{camera:{position:[1,2,-3],fov:45,near:1,far:1e3},dpr:[1,2],shadows:!0,onCreated:function(e){e.camera.lookAt(0,1,0)},children:[(0,b.jsx)("color",{attach:"background",args:[10526880]}),(0,b.jsx)("fog",{attach:"fog",color:10526880,near:10,far:50}),(0,b.jsx)("hemisphereLight",{color:16777215,groundColor:4473924,position:[0,20,0]}),(0,b.jsx)("directionalLight",{color:16777215,position:[-3,10,-10],castShadow:!0,"shadow-camera-left":-2,"shadow-camera-right":2,"shadow-camera-top":2,"shadow-camera-bottom":-2,"shadow-camera-near":.1,"shadow-camera-far":40}),(0,b.jsx)(X,{}),(0,b.jsx)(T,{})]})}}}]);
//# sourceMappingURL=746.cb7e19ee.chunk.js.map